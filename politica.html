<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba Partidos</title>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
</head>
<body>
  <h1>Partidos Pol√≠ticos</h1>
  <div id="mensajes" style="color:red; font-weight:bold;"></div>
  <div id="listaPartidos"></div>

  <script>
    const supabaseUrl = "https://jdvwlfogkzrzovepzjqa.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkdndsZm9na3pyem92ZXB6anFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMzY1MjEsImV4cCI6MjA3MzYxMjUyMX0.IwVFrvuluY0tfgE82XnqYSsRjFPsDYnlfyirHjKu1TI"; // Cambia esto por tu public anon key
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    async function cargarPartidos() {
      const mensajesDiv = document.getElementById("mensajes");
      const listaDiv = document.getElementById("listaPartidos");

      const { data, error } = await supabase
        .from("partidos_politicos")
        .select("*");

      if(error){
        mensajesDiv.innerText = "Error cargando partidos: " + error.message;
        listaDiv.innerText = "";
        return;
      }

      if(!data || data.length === 0){
        mensajesDiv.innerText = "No hay partidos o no se pudieron cargar.";
        listaDiv.innerText = "";
        return;
      }

      mensajesDiv.innerText = "Partidos cargados correctamente:";
      listaDiv.innerHTML = data.map(p => `
        <div style="border:1px solid #ccc; margin:5px; padding:5px; background:${p.color||'#fff'}">
          <h3>${p.nombre}</h3>
          ${p.logo ? `<img src="${p.logo}" width="80">` : ""}
          <p>${p.descripcion||""}</p>
          <small>Creado por: ${p.creador_id}</small>
        </div>
      `).join("");
    }

    cargarPartidos();
  </script>
</body>
</html>
