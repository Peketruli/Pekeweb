<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>RebeldÃ­a IN.AR</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://unpkg.com/@supabase/supabase-js"></script>
<style>
body {
    background: linear-gradient(45deg, #FF5733, #FF8D1A, #FFC300, #FF5733);
    background-size: 400% 400%;
    animation: gradientBG 10s ease infinite;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 50px;
    position: relative;
    margin-bottom: 100px; 
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.auth-container, .user-info {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.auth-button {
    padding: 10px 20px;
    font-size: 1em;
    color: white;
    background-color: #333;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    text-decoration: none;
    margin: 5px;
}

.user-info {
    display: none;
    cursor: pointer;
}

#userLogo {
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

#userName {
    font-size: 1em;
    font-weight: bold;
}

/* MenÃº desplegable */
.dropdown-menu {
    display: none;
    position: absolute;
    top: 60px;
    right: 20px;
    background-color: black;
    color: black;
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    width: 150px;
    text-align: left;
}

.dropdown-menu td {
    padding: 10px;
    cursor: pointer;
}

.dropdown-menu td:hover {
    background-color: #ddd;
}

/* Contenedor de los botones de navegaciÃ³n */
.nav-container {
    position: fixed;
    bottom: 20px;
    left: 0;
    width: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    padding: 15px 0;
    display: flex;
    justify-content: space-around;
    align-items: center;
}

.nav-button {
    background-color: #007BFF;
    color: white;
    padding: 12px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    width: 18%;
    transition: background-color 0.3s;
}

.nav-button:hover {
    background-color: #0056b3;
}

#pdfButtonContainer {
    margin-top: 20px;
}

#downloadButton {
    background-color: #dc3545;
    padding: 12px;
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 16px;
    cursor: pointer;
    display: none;
}

#downloadButton:hover {
    background-color: #c82333;
}

/* Estilo de modal */
#updatesModal {
    display:none; 
    position: fixed; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%);
    background-color: rgba(1,0,0,1); 
    color: white; 
    padding: 20px; 
    border-radius: 10px; 
    width: 80%; 
    max-width: 400px; 
    z-index: 1000;
}

#updatesContent {
    text-align:left; 
    max-height:300px; 
    overflow-y:auto;
}

#modalOverlay {
    display:none; 
    position:fixed; 
    top:0; 
    left:0; 
    width:100%; 
    height:100%; 
    background-color: rgba(0,0,0,0.5); 
    z-index:900;
}

#closeUpdatesButton {
    margin-top:15px; 
    padding:10px 15px; 
    border:none; 
    border-radius:5px; 
    background-color:#dc3545; 
    color:white; 
    cursor:pointer;
}

/* BotÃ³n llamativo de actualizaciones */
#updatesButton {
    background-color: #ff4081;
    color: white;
    font-size: 20px;
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255,64,129,0.6);
    transition: all 0.3s;
    margin-top: 20px;
}

#updatesButton:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(255,64,129,0.8);
}

#politicaButton {
    background-color: #4CAF50;
    color: white;
    font-size: 20px;
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.6);
    transition: all 0.3s;
}

#politicaButton:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.8);
}

#casinoButton {
    background-color: #f39c12;
    color: white;
    font-size: 20px;
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(243,156,18,0.6);
    transition: all 0.3s;
    margin-top: 20px;
    margin-left: 10px;
}

#casinoButton:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(243,156,18,0.8);
}
    #uyButton {
    background-color: red;
    color: white;
    font-size: 20px;
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(155, 0, 0, 0.6;
    transition: all 0.3s;
    margin-top: 20px;
    margin-left: 10px;
}
#uyButton:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(155, 0, 0, 0.8);
}
    #eleccionesButton {
    background-color: blue;
    color: white;
    font-size: 20px;
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(155, 0, 0, 0.6;
    transition: all 0.3s;
    margin-top: 20px;
    margin-left: 10px;
}
#eleccionesButton:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(155, 0, 0, 0.8);
}
</style>
</head>
<body>
<h1>Bienvenidos a RebeldÃ­a IN.AR</h1>

<div class="auth-container" id="authContainer">
    <button class="auth-button" onclick="window.location.href='login.html'">Iniciar sesiÃ³n o registrarse</button>
</div>

<div class="user-info" id="userInfo">
    <h3 id="userName"></h3>
    <img id="userLogo" src="logoDefault.png" alt="Logo del usuario">
</div>

<div class="dropdown-menu" id="dropdownMenu">
    <table>
        <tr><td onclick="logout()">ðŸšª Cerrar sesiÃ³n</td></tr>
    </table>
</div>

<div class="nav-container">
    <button class="nav-button" onclick="window.location.href='blog.html'">Blog</button>
    <button class="nav-button" onclick="window.location.href='chats.html'">Chat</button>
    <button class="nav-button" onclick="window.location.href='calendario.html'">Calendario</button>
    <button class="nav-button" onclick="window.location.href='https://sites.google.com/arrigorriagabhi.net/ikaslea/inicio'">Juegos</button>
    <button class="nav-button" onclick="window.location.href='encuestas.html'">Encuesta</button>
</div>

<h2>Bienvenidos a una pÃ¡gina web que en mi opiniÃ³n deberÃ­a haber hecho el instituto hace mucho. PodÃ©is hacer lo que querÃ¡is, podÃ©is hacer un blog insultando a profesores, debatir, hacer grupos de trabajo, clubsâ€¦ La intenciÃ³n de la web es un sitio donde los alumnos se sientan libres de la cÃ¡rcel del instituto de Arrigorriaga. Espero que disfrutÃ©is.</h2>

<h1>Motivo</h1>
<h2>Como el instituto solo piensa para sus beneficios, he pensado en hacer una web para los alumnos, donde el lÃ­mite no existe y podÃ©is sentiros libres de criticar a profesores o hacer todo lo que se puede hacer en la web. Gracias.</h2>

<!-- Botones principales -->
<button id="casinoButton" onclick="window.location.href='casino.html'">ðŸŽ° Casino (Â¡trabajando, no entrar!) ðŸŽ°</button>
<button id="updatesButton">ðŸŒŸ Nuevas Actualizaciones ðŸŒŸ</button>
<button id="politicaButton" onclick="window.location.href='politica.html'">ðŸ“œ PolÃ­tica ðŸ“œ</button>
    <button class="nav-button" onclick="window.location.href='uy.html'">ðŸ”žPekeHubðŸ”ž</button>

<!-- BotÃ³n solo para Peketruli -->
<button class="auth-button" onclick="window.location.href='admin.html'">Admin</button>

<!-- Ventana modal de actualizaciones -->
<div id="updatesModal">
    <h2>Actualizaciones Recientes</h2>
    <div id="updatesContent">
        <ul>
            <li>ActualizaciÃ³n 1: Nuesvo sistema de Politica, dentro de poco elecciones </li>
            <li>ActualizaciÃ³n 2: Trabajando en el casino</li>
            <li>ActualizaciÃ³n 3: CorrecciÃ³n de errores menores.</li>
        </ul>
    </div>
    <button id="closeUpdatesButton">Cerrar</button>
</div>

<div id="modalOverlay"></div>

<script>
const SUPABASE_URL = "https://jdvwlfogkzrzovepzjqa.supabase.co";
const SUPABASE_KEY = "TU_SUPABASE_KEY";
const { createClient } = window.supabase;
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

document.addEventListener("DOMContentLoaded", function () {
    loadUserInfo();

    const userInfo = document.getElementById("userInfo");
    const dropdownMenu = document.getElementById("dropdownMenu");

    userInfo.addEventListener("click", function () {
        dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
    });

    document.addEventListener("click", function (event) {
        if (!userInfo.contains(event.target) && !dropdownMenu.contains(event.target)) {
            dropdownMenu.style.display = "none";
        }
    });
});

async function logout() {
    await supabase.auth.signOut();
    localStorage.removeItem("currentUser");
    window.location.href = "login.html";
}

function loadUserInfo() {
    const user = JSON.parse(localStorage.getItem("currentUser"));
    const authContainer = document.getElementById("authContainer");
    const userInfo = document.getElementById("userInfo");

    if (user) {
        userInfo.style.display = "flex";
        authContainer.style.display = "none";
        document.getElementById("userName").textContent = user.username || "Usuario";
        document.getElementById("userLogo").src = user.logo || "logoDefault.png";

        if (user.username === "Peketruli") {
            document.getElementById("downloadButton").style.display = "inline-block";
        } else {
            document.getElementById("downloadButton").style.display = "none";
        }
    } else {
        userInfo.style.display = "none";
        authContainer.style.display = "flex";
    }
}

function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let users = JSON.parse(localStorage.getItem("users")) || [];
    let content = "Datos de los registros:\n\n";
    users.forEach(user => {
        content += `Nombre de usuario: ${user.username}\nCorreo electrÃ³nico: ${user.email}\nLogo: ${user.logo ? "SÃ­" : "No"}\n\n`;
    });
    doc.text(content, 10, 10);
    doc.save("registros.pdf");
}

// Modal actualizaciones
const updatesButton = document.getElementById("updatesButton");
const updatesModal = document.getElementById("updatesModal");
const closeUpdatesButton = document.getElementById("closeUpdatesButton");
const modalOverlay = document.getElementById("modalOverlay");

updatesButton.addEventListener("click", () => {
    updatesModal.style.display = "block";
    modalOverlay.style.display = "block";
});

closeUpdatesButton.addEventListener("click", () => {
    updatesModal.style.display = "none";
    modalOverlay.style.display = "none";
});

modalOverlay.addEventListener("click", () => {
    updatesModal.style.display = "none";
    modalOverlay.style.display = "none";
});
</script>
</body>
</html>
