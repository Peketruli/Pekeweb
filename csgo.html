<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>CSGO 2D — Ciudad</title>
<style>
  html,body{margin:0;padding:0;overflow:hidden;background:#000;}
  canvas{display:block;}
  #hud{
    position:fixed;top:10px;left:10px;color:white;
    font-family:Arial, sans-serif;font-size:16px;
    background:rgba(0,0,0,0.5);padding:5px 10px;border-radius:8px;
  }
</style>
</head>
<body>
<div id="hud">Cargando...</div>
<canvas id="game"></canvas>
<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const hud=document.getElementById("hud");
let W,H;
function resize(){
  W=canvas.width=innerWidth;
  H=canvas.height=innerHeight;
}
resize(); addEventListener("resize",resize);

//-------------------------
// CONFIG
//-------------------------
const TILE=60;
const MAP=[
"########################",
"#.............#........#",
"#.............#........#",
"#.....A.......#...B....#",
"#.............#........#",
"#.............#........#",
"#.............#........#",
"#.............#........#",
"#########.....##########",
"#......................#",
"#......................#",
"#......................#",
"########################"
];
const walls=[];
for(let y=0;y<MAP.length;y++){
  for(let x=0;x<MAP[y].length;x++){
    if(MAP[y][x]==="#") walls.push({x:x*TILE,y:y*TILE});
  }
}

//-------------------------
// ENTIDADES
//-------------------------
class Entity{
  constructor(x,y,color,team){
    this.x=x;this.y=y;
    this.color=color;
    this.team=team;
    this.dir=Math.random()*Math.PI*2;
    this.hp=100;
  }
  draw(){
    ctx.fillStyle=this.color;
    ctx.beginPath();
    ctx.arc(this.x,this.y,10,0,Math.PI*2);
    ctx.fill();
  }
}

const player=new Entity(200,200,"#00aaff","CT");
player.name="Tú";

const allies=[];const enemies=[];
const namesCT=["Alpha","Bravo","Charlie","Delta"];
const namesT=["Nash","Rico","Ivan","Sergei"];
for(let i=0;i<4;i++){
  allies.push(new Entity(300+Math.random()*100,300+Math.random()*100,"#00ff88","CT"));
  allies[i].name=namesCT[i];
}
for(let i=0;i<5;i++){
  enemies.push(new Entity(800+Math.random()*100,400+Math.random()*100,"#ff4444","T"));
  enemies[i].name=namesT[i];
}

//-------------------------
// INPUT
//-------------------------
const keys={};
addEventListener("keydown",e=>keys[e.key]=true);
addEventListener("keyup",e=>keys[e.key]=false);

//-------------------------
// IA SIMPLE
//-------------------------
function updateAI(bot){
  const target=player;
  const dx=target.x-bot.x, dy=target.y-bot.y;
  const dist=Math.hypot(dx,dy);
  if(dist<350){
    bot.dir=Math.atan2(dy,dx);
    bot.x+=Math.cos(bot.dir)*1.2;
    bot.y+=Math.sin(bot.dir)*1.2;
  }else{
    bot.x+=Math.cos(bot.dir)*0.5;
    bot.y+=Math.sin(bot.dir)*0.5;
    if(Math.random()<0.01) bot.dir+=Math.random()-0.5;
  }
}

//-------------------------
// UPDATE
//-------------------------
let camX=0,camY=0;
function update(){
  // mover jugador
  let spd=3;
  if(keys["w"]) player.y-=spd;
  if(keys["s"]) player.y+=spd;
  if(keys["a"]) player.x-=spd;
  if(keys["d"]) player.x+=spd;

  // IA
  [...allies,...enemies].forEach(updateAI);

  // Cámara centrada
  camX=player.x-W/2;
  camY=player.y-H/2;

  draw();
  requestAnimationFrame(update);
}

//-------------------------
// DRAW
//-------------------------
function draw(){
  ctx.fillStyle="#202020";
  ctx.fillRect(0,0,W,H);
  ctx.save();
  ctx.translate(-camX,-camY);
  // mapa
  ctx.fillStyle="#3a3a3a";
  for(const w of walls) ctx.fillRect(w.x,w.y,TILE,TILE);
  // entidades
  [...allies,player,...enemies].forEach(e=>e.draw());
  ctx.restore();

  // HUD
  hud.innerHTML=`<b>CSGO 2D</b><br>${player.name} HP:${player.hp}`;
}

// iniciar
hud.textContent="Listo. Iniciando...";
requestAnimationFrame(update);
</script>
</body>
</html>
