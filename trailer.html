<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PekeOS — Trailer (detallado, lento)</title>
<style>
  :root{
    --bezel:#111216;
    --monitor:#071018;
    --accent:#00f6ff;
    --glass: rgba(255,255,255,0.04);
    --txt:#cfe;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#02030a,#05060a);font-family:Inter, system-ui, Arial, sans-serif;color:#fff;display:flex;align-items:center;justify-content:center}
  /* Monitor frame - retro curvado with realistic bezel */
  .monitor-frame{
    width:1100px; max-width:95vw; aspect-ratio:16/9; border-radius:30px; padding:30px;
    background:linear-gradient(180deg,var(--bezel),#0b0b0d);
    box-shadow: 0 60px 160px rgba(0,0,0,0.8), inset 0 10px 30px rgba(255,255,255,0.02);
    position:relative; display:flex; align-items:center; justify-content:center; overflow:visible;
  }
  .stand{ position:absolute; bottom:-60px; left:50%; transform:translateX(-50%); width:320px; height:56px; border-radius:10px;
    background:linear-gradient(180deg,#0c0c0d,#0a0a0b); box-shadow:0 28px 60px rgba(0,0,0,0.7); }
  /* inner screen */
  .screen{ width:100%; height:100%; border-radius:14px; overflow:hidden; background:var(--monitor); display:flex; align-items:center; justify-content:center; position:relative; }
  /* cinematic overlay fade (A) */
  #fadeOverlay{ position:absolute; inset:0; background:#000; pointer-events:none; opacity:1; transition:opacity 900ms ease; z-index:120; }
  #fadeOverlay.hidden{ opacity:0; }
  /* CRT scan overlay (B) */
  .crt-scan{ position:absolute; inset:0; pointer-events:none; opacity:0; mix-blend-mode:screen; background:linear-gradient(180deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.0) 50%, rgba(255,255,255,0.03) 100%); transition:opacity 180ms linear; z-index:115 }
  .pc-crt .crt-scan{ opacity:0.18; animation:scan 380ms linear infinite; }
  @keyframes scan{ 0%{ transform:translateY(-100%) } 100%{ transform:translateY(100%) } }
  .pc-crt .screen{ filter:contrast(.6) saturate(.7) brightness(.6) blur(.25px); transform:scaleY(.98); }

  /* Common helpers (detailed visuals) */
  .center-col{ display:flex; flex-direction:column; align-items:center; justify-content:center; width:100%; height:100%; gap:18px; padding:24px; text-align:center; }
  .fade-in{ opacity:0; transform:translateY(8px); transition:opacity 1000ms ease, transform 1000ms cubic-bezier(.2,.9,.3,1); }
  .show{ opacity:1; transform:none; }
  .subtle-card{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:10px; box-shadow: 0 18px 40px rgba(0,0,0,0.6); padding:12px; }

  /* Logo placeholder styling when missing */
  .logo-placeholder{ width:680px; height:200px; border-radius:12px; background:linear-gradient(90deg,#071018,#0b1116); display:flex; align-items:center; justify-content:center; color:#89d; font-size:42px; font-weight:800; letter-spacing:2px; box-shadow:0 20px 60px rgba(0,0,0,0.6); }

  /* Files detailed */
  .files{ display:flex; gap:28px; align-items:flex-end; perspective:900px; }
  .file{ width:170px; height:220px; border-radius:12px; border:3px solid var(--accent); background:linear-gradient(180deg,#061218,#0a1116); opacity:0; transform:translateY(50px) rotateX(6deg); transition:all 1200ms cubic-bezier(.22,.9,.38,1); box-shadow: 0 30px 100px rgba(0,0,0,0.7); position:relative; overflow:hidden; }
  .file::after{ content:''; position:absolute; left:0; right:0; top:0; height:34%; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0)); }
  .file .title{ position:absolute; bottom:14px; left:12px; right:12px; color:#cfe; font-weight:600; font-size:0.95rem; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; }
  .file.fly{ opacity:1; transform:none; }

  /* Settings panel — more detailed UI */
  .settings{
    width:82%; height:74%; border-radius:12px; border:2px solid var(--glass);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.005)); position:relative; display:flex; align-items:center; justify-content:center; padding:18px;
  }
  .color-box{ position:absolute; left:28px; top:22px; width:220px; height:48px; border-radius:10px; border:2px solid var(--accent); display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); font-weight:700; box-shadow:0 8px 24px rgba(0,0,0,0.45); }
  .color-band{ position:absolute; right:22px; top:22px; width:52px; height:150px; border-radius:10px; overflow:hidden; display:flex; flex-direction:column; gap:10px; padding:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0)); box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }
  .color-seg{ height:28px; border-radius:8px; opacity:0; transform:translateX(10px); transition:all 600ms cubic-bezier(.22,.9,.38,1); box-shadow:0 8px 18px rgba(0,0,0,0.55); cursor:pointer; }
  .color-seg.show{ opacity:1; transform:none; }
  .color-seg.selected{ outline: 3px solid rgba(255,255,255,0.06); transform:scale(1.03); }

  .cursor{ width:30px; height:30px; background:#fff; border-radius:6px; position:absolute; box-shadow:0 12px 36px rgba(0,0,0,0.6); transform:translate(-50%,-50%); transition:all 1500ms cubic-bezier(.22,.9,.38,1); display:flex; align-items:center; justify-content:center; font-size:14px; color:#000; }

  /* Quadrants */
  .quad{ position:absolute; box-sizing:border-box; border:2px solid rgba(255,255,255,0.04); display:flex; align-items:center; justify-content:center; font-size:2.2rem; color:rgba(255,255,255,0.95); opacity:0; transform:scale(.98); transition:all 1000ms cubic-bezier(.22,.9,.38,1); padding:18px; }
  #q1{ left:0; top:0; width:50%; height:50%; } #q2{ right:0; top:0; width:50%; height:50%; } #q3{ right:0; bottom:0; width:50%; height:50%; } #q4{ left:0; bottom:0; width:50%; height:50%; }
  .quad.reveal{ opacity:1; transform:none; box-shadow: inset 0 0 80px rgba(0,0,0,0.35); }

  /* Chat details */
  .chat{ width:78%; height:72%; border-radius:12px; border:2px solid var(--glass); background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); padding:18px; display:flex; flex-direction:column; justify-content:flex-end; gap:12px; }
  .bubble{ max-width:72%; padding:12px 14px; border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); color:#0b1016; opacity:0; transform:translateX(-10px); transition:opacity 900ms ease, transform 900ms cubic-bezier(.22,.9,.38,1); box-shadow:0 12px 36px rgba(0,0,0,0.5); }
  .bubble.in{ opacity:1; transform:none; }

  /* PDFs — with cover detail */
  .pdf{ width:160px; height:220px; border-radius:12px; background:linear-gradient(180deg,#fff,#e9e9e9); border:2px solid rgba(0,0,0,0.06); box-shadow:0 36px 100px rgba(0,0,0,0.6); opacity:0; transform:translateY(26px) rotate(-3deg); transition:all 1100ms cubic-bezier(.22,.9,.38,1); position:relative; overflow:hidden; }
  .pdf .cover{ height:36%; background:linear-gradient(90deg,#cfe,#9bd); display:flex; align-items:center; justify-content:center; color:#052; font-weight:800; font-size:20px; }
  .pdf.in{ opacity:1; transform:none; }

  /* Final */
  .final{ display:flex; flex-direction:column; align-items:center; gap:12px; }
  .date{ font-size:1.4rem; color:#bcd; }

  @media (max-width:900px){
    .monitor-frame{ width:96vw; padding:20px; border-radius:14px; }
    .file{ width:120px; height:160px; }
    .pdf{ width:120px; height:160px; }
  }
</style>
</head>
<body>
  <div class="monitor-frame" id="frame" role="application" aria-label="Monitor PekeOS">
    <div class="screen" id="screenArea" aria-live="polite"></div>

    <!-- overlays -->
    <div id="fadeOverlay"></div>
    <div class="crt-scan" id="crtScan" aria-hidden="true" style="display:none"></div>

    <div class="stand" aria-hidden="true"></div>
  </div>

<script>
/* ---- Trailer runner (duración libre) ----
   - All animations are synchronized: each scene waits for its internal animations.
   - Color picker: cursor walks, pauses 0.8s, clicks, changes border color with 600ms transition.
   - Cursor moves take 1.5s per move (option A).
*/

const screen = document.getElementById('screenArea');
const fade = document.getElementById('fadeOverlay');
const frame = document.getElementById('frame');
const crtScan = document.getElementById('crtScan');

// helper utilities
const sleep = ms => new Promise(res => setTimeout(res, ms));
function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }
function safe(el, fn){ if(el) try{ fn(el); }catch(e){ console.error(e); } }

// timings (option A for color scene)
const T = {
  cursorMove: 1500, // ms to move cursor between colors
  cursorPause: 800, // ms pause before click
  borderChange: 600, // ms border color transition
  smallPause: 300
};

// Start overlay opaque (monitor off at start)
fade.classList.remove('hidden');

async function setFade(visible){
  if(visible){
    fade.classList.remove('hidden'); // black
    await sleep(420);
  } else {
    fade.classList.add('hidden'); // reveal
    await sleep(260);
  }
}

/* POWER ON sequence (slow flicker) */
async function powerOn(){
  // flicker pattern (gentle)
  fade.classList.add('hidden'); await sleep(180);
  fade.classList.remove('hidden'); await sleep(120);
  fade.classList.add('hidden'); await sleep(260);
}

/* SCENE: logo — uses user's PekeOS.png or placeholder */
async function sceneLogo(){
  screen.innerHTML = '';
  const wrap = document.createElement('div'); wrap.className='center-col';
  const img = document.createElement('img');
  img.id='logoImg'; img.alt='PekeOS'; img.style.maxWidth='780px'; img.style.width='62%'; img.style.height='auto'; img.style.borderRadius='10px';
  img.src = 'PekeOS.png';
  img.className = 'fade-in';
  img.onerror = function(){ const ph = document.createElement('div'); ph.className='logo-placeholder'; ph.textContent='PekeOS'; img.replaceWith(ph); };
  wrap.appendChild(img);
  screen.appendChild(wrap);
  await sleep(240);
  safe(img, el=>el.classList.add('show'));
  // hold for natural time
  await sleep(2600);
}

/* SCENE: files — stagger with nicer cards */
async function sceneFiles(){
  screen.innerHTML = '';
  const wrap = document.createElement('div'); wrap.className='center-col';
  const files = document.createElement('div'); files.className='files';
  const makeFile = (title) => {
    const f = document.createElement('div'); f.className='file';
    const t = document.createElement('div'); t.className='title'; t.textContent = title;
    f.appendChild(t);
    return f;
  };
  const a = makeFile('documento_A.pdf');
  const b = makeFile('apuntes_B.pdf');
  const c = makeFile('resumen_C.pdf');
  files.appendChild(a); files.appendChild(b); files.appendChild(c);
  const text = document.createElement('div'); text.className='fade-in'; text.style.maxWidth='860px'; text.style.color='var(--txt)';
  text.innerHTML = 'La Pekeweb da un paso adelante sin mirar el fracaso,<br>ahora todo en 1 conjunto solo';
  wrap.appendChild(files); wrap.appendChild(text);
  screen.appendChild(wrap);

  await sleep(320);
  a.classList.add('fly'); await sleep(520);
  b.classList.add('fly'); await sleep(520);
  c.classList.add('fly');
  text.classList.add('show');
  await sleep(1200);
}

/* SCENE: settings with interactive color clicks */
async function sceneSettings(){
  screen.innerHTML = '';
  // layout
  const outer = document.createElement('div'); outer.style.width='100%'; outer.style.height='100%'; outer.style.display='flex'; outer.style.alignItems='center'; outer.style.justifyContent='center';
  const settings = document.createElement('div'); settings.className='settings'; settings.id='settingsPanel';
  const colorBox = document.createElement('div'); colorBox.className='color-box'; colorBox.textContent='Colores';
  const colorBand = document.createElement('div'); colorBand.className='color-band'; colorBand.id='colorBand';
  const colors = ['#00f6ff','#ff2ec7','#2eff6b','#ffd400'];
  colors.forEach((c,i) => {
    const seg = document.createElement('div'); seg.className='color-seg'; seg.style.background = c; seg.dataset.color = c;
    // add hover micro effect
    seg.addEventListener('mouseenter', ()=> seg.style.transform = 'scale(1.03)');
    seg.addEventListener('mouseleave', ()=> seg.style.transform = '');
    colorBand.appendChild(seg);
  });
  const cursor = document.createElement('div'); cursor.id='cursor'; cursor.className='cursor'; cursor.style.left='14%'; cursor.style.top='62%';
  // decorative UI elements inside settings (buttons, mock windows)
  const mockWindow = document.createElement('div'); mockWindow.style.width='62%'; mockWindow.style.height='68%'; mockWindow.style.borderRadius='10px'; mockWindow.style.background='linear-gradient(180deg,#091018,#0c1116)'; mockWindow.style.boxShadow='inset 0 6px 18px rgba(0,0,0,0.6)'; mockWindow.style.padding='14px'; mockWindow.innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
      <div style="display:flex;gap:8px;align-items:center">
        <div style="width:10px;height:10px;border-radius:50%;background:#ff6b6b;box-shadow:0 2px 6px rgba(0,0,0,0.6)"></div>
        <div style="width:10px;height:10px;border-radius:50%;background:#ffd26b"></div>
        <div style="width:10px;height:10px;border-radius:50%;background:#69ff6b"></div>
      </div>
      <div style="font-size:0.9rem;color:#9fb4c8">Ajustes • Apariencia</div>
    </div>
    <div style="height:calc(100% - 40px);display:flex;align-items:center;justify-content:center;color:#bcd">Vista previa de la Pekeweb</div>
  `;
  settings.appendChild(colorBox); settings.appendChild(colorBand); settings.appendChild(mockWindow); settings.appendChild(cursor);
  outer.appendChild(settings);
  const text = document.createElement('div'); text.className='fade-in'; text.style.marginLeft='18px'; text.style.maxWidth='420px'; text.style.color='var(--txt)';
  text.innerText = 'Aburrido de que no puedas personalizar la Pekeweb a tu gusto?';
  outer.appendChild(text);
  screen.appendChild(outer);

  // reveal text and colors slowly
  await sleep(260); text.classList.add('show');
  const segEls = document.querySelectorAll('#colorBand .color-seg');
  for(let i=0;i<segEls.length;i++){ await sleep(520); segEls[i].classList.add('show'); }

  // Cursor clicking animation sequence (option A timings)
  // compute absolute positions for each segment (center)
  function getCenterPos(el){
    const r = el.getBoundingClientRect();
    const container = settings.getBoundingClientRect();
    // compute relative percent of settings container
    const x = ((r.left + r.width/2) - container.left) / container.width * 100;
    const y = ((r.top + r.height/2) - container.top) / container.height * 100;
    return { x, y };
  }

  // ensure layout is painted
  await sleep(260);

  // step through each color: move cursor (1.5s), pause 0.8s, click (visual), change border (600ms)
  for(let i=0;i<segEls.length;i++){
    const seg = segEls[i];
    const pos = getCenterPos(seg);
    // move cursor (set transition time to T.cursorMove)
    cursor.style.transition = `all ${T.cursorMove}ms cubic-bezier(.22,.9,.38,1)`;
    cursor.style.left = `${pos.x}%`;
    cursor.style.top = `${pos.y}%`;
    // wait movement
    await sleep(T.cursorMove + 60);
    // small hover bounce
    cursor.animate([{ transform: 'translate(-50%,-55%) scale(1.05)' }, { transform: 'translate(-50%,-50%) scale(1)' }], { duration: 220, easing: 'cubic-bezier(.2,.9,.3,1)' });
    // pause before click
    await sleep(T.cursorPause);
    // click visual (scale quickly)
    cursor.animate([{ transform: 'translate(-50%,-50%) scale(0.85)' }, { transform: 'translate(-50%,-50%) scale(1)' }], { duration: 180, easing: 'ease-out' });
    // mark selection visually
    segEls.forEach(s=> s.classList.remove('selected'));
    seg.classList.add('selected');
    // change the settings border color smoothly (600ms)
    settings.style.transition = `box-shadow ${T.borderChange}ms ease, border-color ${T.borderChange}ms ease`;
    // set border highlight via box-shadow and border-color
    settings.style.borderColor = seg.dataset.color;
    settings.style.boxShadow = `0 20px 80px ${seg.dataset.color}33, inset 0 6px 18px rgba(0,0,0,0.5)`;
    // wait border change time
    await sleep(T.borderChange + 40);
    // small hold so user perceives change
    await sleep(520);
  }

  // keep the last selected color visible for a moment
  await sleep(600);
}

/* SCENE: quadrants */
async function sceneQuads(){
  screen.innerHTML = '';
  const wrap = document.createElement('div'); wrap.style.position='relative'; wrap.style.width='100%'; wrap.style.height='100%';
  const items = [
    {id:'q1', label:'Ocio'},
    {id:'q2', label:'Noticias'},
    {id:'q3', label:'Admin'},
    {id:'q4', label:'Redes'}
  ];
  items.forEach(it => {
    const d = document.createElement('div'); d.id = it.id; d.className = 'quad'; d.textContent = it.label;
    wrap.appendChild(d);
  });
  screen.appendChild(wrap);
  // reveal staggered slower
  await sleep(360); document.getElementById('q1').classList.add('reveal');
  await sleep(520); document.getElementById('q2').classList.add('reveal');
  await sleep(520); document.getElementById('q3').classList.add('reveal');
  await sleep(520); document.getElementById('q4').classList.add('reveal');
  await sleep(900);
}

/* SCENE: chat */
async function sceneChat(){
  screen.innerHTML = '';
  const wrap = document.createElement('div'); wrap.style.display='flex'; wrap.style.flexDirection='column'; wrap.style.alignItems='center'; wrap.style.width='100%'; wrap.style.height='100%';
  const chat = document.createElement('div'); chat.className = 'chat';
  const b1 = document.createElement('div'); b1.className='bubble'; b1.textContent = '¡Bienvenido!';
  const b2 = document.createElement('div'); b2.className='bubble'; b2.textContent = 'Privados y públicos, como quieras.';
  const b3 = document.createElement('div'); b3.className='bubble'; b3.textContent = 'Comparte con seguridad.';
  chat.appendChild(b1); chat.appendChild(b2); chat.appendChild(b3); wrap.appendChild(chat);
  const txt = document.createElement('div'); txt.className='fade-in'; txt.style.marginTop='14px'; txt.style.maxWidth='760px'; txt.style.textAlign='center'; txt.textContent = 'Tranquilo, ya tenemos chats privados y públicos';
  wrap.appendChild(txt);
  screen.appendChild(wrap);
  // bubbles slow-in
  await sleep(420); b1.classList.add('in');
  await sleep(720); b2.classList.add('in');
  await sleep(720); b3.classList.add('in');
  txt.classList.add('show');
  await sleep(1100);
}

/* SCENE: study PDFs */
async function sceneStudy(){
  screen.innerHTML = '';
  const wrap = document.createElement('div'); wrap.style.display='flex'; wrap.style.flexDirection='column'; wrap.style.alignItems='center'; wrap.style.width='100%'; wrap.style.height='100%';
  const row = document.createElement('div'); row.style.display='flex'; row.style.gap='26px'; row.style.justifyContent='center'; row.style.alignItems='flex-end';
  for(let i=1;i<=4;i++){
    const p = document.createElement('div'); p.id = 'p'+i; p.className='pdf';
    const cover = document.createElement('div'); cover.className='cover'; cover.textContent = 'AP';
    p.appendChild(cover);
    row.appendChild(p);
  }
  const t = document.createElement('div'); t.className='fade-in'; t.style.marginTop='14px'; t.style.maxWidth='760px'; t.style.textAlign='center'; t.innerHTML = 'Necesitas estudiar y no tienes apuntes?<br>Revisa por si alguien te ha puesto algo para ayudar';
  wrap.appendChild(row); wrap.appendChild(t); screen.appendChild(wrap);
  // stagger reveal slower
  await sleep(360); document.getElementById('p1')?.classList.add('in');
  await sleep(480); document.getElementById('p2')?.classList.add('in');
  await sleep(480); document.getElementById('p3')?.classList.add('in');
  await sleep(480); document.getElementById('p4')?.classList.add('in');
  t.classList.add('show');
  await sleep(1200);
}

/* POWER OFF (CRT B) */
async function powerOff(){
  // fade to black quickly then small scanline
  fade.classList.remove('hidden'); await sleep(280);
  frame.classList.add('pc-crt');
  crtScan.style.display = 'block';
  await sleep(900);
  frame.classList.remove('pc-crt');
  crtScan.style.display = 'none';
  await sleep(260);
}

/* FINAL: logo + date */
async function finalReveal(){
  screen.innerHTML = '';
  const wrap = document.createElement('div'); wrap.className='final center-col';
  const img = document.createElement('img'); img.src='PekeOS.png'; img.alt='PekeOS'; img.style.width='56%'; img.style.maxWidth='720px'; img.style.borderRadius='10px';
  img.onerror = function(){ const ph = document.createElement('div'); ph.className='logo-placeholder'; ph.textContent='PekeOS'; img.replaceWith(ph); };
  wrap.appendChild(img);
  const date = document.createElement('div'); date.className='date'; date.textContent = '04/12/25';
  wrap.appendChild(date);
  screen.appendChild(wrap);
  await sleep(260);
  if(img.classList) img.classList.add('show');
  await sleep(1800);
}

/* Runner: orchestrates everything in order; each scene awaits internal animations */
(async function run(){
  try{
    // start with monitor OFF (overlay black)
    fade.classList.remove('hidden');

    // 1 power on
    await powerOn();

    // 2 scenes
    await sceneLogo();
    await sceneFiles();
    await sceneSettings();  // ← color clicks executed here with exact timings
    await sceneQuads();
    await sceneChat();
    await sceneStudy();

    // power off then final
    await powerOff();
    await finalReveal();

    // end — keep final visible
  }catch(e){
    console.error('Error en el trailer sincronizado:', e);
    // final fallback
    fade.classList.remove('hidden');
    screen.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#fff">Ha ocurrido un error — mira la consola</div>';
  }
})();
</script>
</body>
</html>
