<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Casino 3D Directo</title>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<style>
  body { margin:0; overflow:hidden; background:black; cursor:none; }
</style>
</head>
<body>

<script>
// === ESCENA ===
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x050505);

// === CÁMARA ===
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0, 1.7, 10);

// === RENDER ===
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// === LUCES ===
scene.add(new THREE.AmbientLight(0xffffff,0.5));
const pointLight = new THREE.PointLight(0xff00ff, 3, 50);
pointLight.position.set(0,5,0);
scene.add(pointLight);

// === SUELO Y PAREDES ===
const floorMat = new THREE.MeshStandardMaterial({color:0x222222});
const floor = new THREE.Mesh(new THREE.PlaneGeometry(50,50), floorMat);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

const wallMat = new THREE.MeshStandardMaterial({color:0x330033});
const backWall = new THREE.Mesh(new THREE.BoxGeometry(50,10,1), wallMat);
backWall.position.set(0,5,-20);
scene.add(backWall);

const leftWall = new THREE.Mesh(new THREE.BoxGeometry(1,10,50), wallMat);
leftWall.position.set(-25,5,5);
scene.add(leftWall);

const rightWall = new THREE.Mesh(new THREE.BoxGeometry(1,10,50), wallMat);
rightWall.position.set(25,5,5);
scene.add(rightWall);

// === PASILLO ===
const corridorWallMat = new THREE.MeshStandardMaterial({color:0x440044});
for(let i=-20; i<5; i+=5){
    const wallL = new THREE.Mesh(new THREE.BoxGeometry(1,10,5), corridorWallMat);
    wallL.position.set(-5,5,i);
    scene.add(wallL);
    const wallR = new THREE.Mesh(new THREE.BoxGeometry(1,10,5), corridorWallMat);
    wallR.position.set(5,5,i);
    scene.add(wallR);
}

// === OBJETOS DEL CASINO ===
const slotMat = new THREE.MeshStandardMaterial({color:0xff00ff,emissive:0x330033});
for(let i=0;i<6;i++){
    const slot = new THREE.Mesh(new THREE.BoxGeometry(1.5,2.5,1.5), slotMat);
    slot.position.set(i*3-7.5,1.25,-5);
    scene.add(slot);
}

const table = new THREE.Mesh(new THREE.CylinderGeometry(5,5,0.5,32), new THREE.MeshStandardMaterial({color:0x004400}));
table.position.set(0,0.25,5);
scene.add(table);

const ruleta = new THREE.Mesh(new THREE.CylinderGeometry(2,2,0.3,32), new THREE.MeshStandardMaterial({color:0x990000}));
ruleta.position.set(-10,0.15,8);
scene.add(ruleta);

// === CONTROLES DE CÁMARA ===
let rotation = { x:0, y:0 };
document.addEventListener('mousemove', (e)=>{
    rotation.y -= e.movementX * 0.002;
    rotation.x -= e.movementY * 0.002;
    rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, rotation.x));
});

// === MOVIMIENTO ===
const keys = {};
document.addEventListener('keydown', e=>keys[e.code]=true);
document.addEventListener('keyup', e=>keys[e.code]=false);

const clock = new THREE.Clock();

function animate(){
    requestAnimationFrame(animate);
    const delta = clock.getDelta();
    const speed = 5;

    // Movimiento WASD
    const forward = new THREE.Vector3(Math.sin(rotation.y),0,Math.cos(rotation.y));
    const right = new THREE.Vector3(forward.z,0,-forward.x);

    if(keys['KeyW']) camera.position.add(forward.clone().multiplyScalar(speed*delta));
    if(keys['KeyS']) camera.position.add(forward.clone().multiplyScalar(-speed*delta));
    if(keys['KeyA']) camera.position.add(right.clone().multiplyScalar(-speed*delta));
    if(keys['KeyD']) camera.position.add(right.clone().multiplyScalar(speed*delta));

    camera.rotation.x = rotation.x;
    camera.rotation.y = rotation.y;

    ruleta.rotation.y += 0.01;

    renderer.render(scene,camera);
}
animate();

window.addEventListener('resize', ()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
