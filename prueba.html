<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Casino 3D Base Visible</title>
<style>
  html, body { margin:0; overflow:hidden; background:#000; }
  canvas { display:block; }
</style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/examples/js/controls/PointerLockControls.js"></script>
<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x223355);

// C치mara elevada
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0, 5, 10);

// Renderizador
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Material visible sin luz
const basic = color => new THREE.MeshBasicMaterial({ color });

// Suelo plano
const floor = new THREE.Mesh(new THREE.PlaneGeometry(200, 200), basic(0x888888));
floor.rotation.x = -Math.PI / 2;
scene.add(floor);

// Cubos grandes a modo de referencia
for (let i = 0; i < 10; i++) {
  const cube = new THREE.Mesh(new THREE.BoxGeometry(2, 2, 2), basic(0xff5500));
  cube.position.set(Math.random() * 50 - 25, 1, Math.random() * 50 - 25);
  scene.add(cube);
}

// Controles tipo FPS
const controls = new THREE.PointerLockControls(camera, document.body);
scene.add(controls.getObject());

// Evento para bloquear rat칩n
document.body.addEventListener('click', () => {
  if (!controls.isLocked) controls.lock();
});

// Movimiento
let moveForward=false, moveBackward=false, moveLeft=false, moveRight=false;
let velocity = new THREE.Vector3();
let direction = new THREE.Vector3();

document.addEventListener('keydown', e=>{
  switch(e.code){
    case 'KeyW': moveForward=true; break;
    case 'KeyS': moveBackward=true; break;
    case 'KeyA': moveLeft=true; break;
    case 'KeyD': moveRight=true; break;
  }
});
document.addEventListener('keyup', e=>{
  switch(e.code){
    case 'KeyW': moveForward=false; break;
    case 'KeyS': moveBackward=false; break;
    case 'KeyA': moveLeft=false; break;
    case 'KeyD': moveRight=false; break;
  }
});

// Animaci칩n
const clock = new THREE.Clock();
function animate(){
  requestAnimationFrame(animate);
  const delta = clock.getDelta();

  velocity.x -= velocity.x * 10.0 * delta;
  velocity.z -= velocity.z * 10.0 * delta;

  direction.z = Number(moveForward) - Number(moveBackward);
  direction.x = Number(moveRight) - Number(moveLeft);
  direction.normalize();

  const speed = 400.0;
  if (moveForward || moveBackward) velocity.z -= direction.z * speed * delta;
  if (moveLeft || moveRight) velocity.x -= direction.x * speed * delta;

  controls.moveRight(-velocity.x * delta);
  controls.moveForward(-velocity.z * delta);

  renderer.render(scene, camera);
}
animate();

// Ajuste de tama침o ventana
window.addEventListener('resize', ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
