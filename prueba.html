<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Test puerta visible</title>
<style>
  html,body{margin:0;height:100%;overflow:hidden;background:#000}
  canvas{display:block}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script>
const canvas = document.getElementById('c');
const renderer = new THREE.WebGLRenderer({canvas, antialias:true});
renderer.setSize(innerWidth, innerHeight);

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x777777);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 100);
camera.position.set(0, 1.6, 2);
camera.lookAt(0,1.6,0);

// --- SUELO ---
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(10,10),
  new THREE.MeshBasicMaterial({color:0x666666})
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

// --- PARED FONDO ---
const wall = new THREE.Mesh(
  new THREE.BoxGeometry(10,5,0.2),
  new THREE.MeshBasicMaterial({color:0xdddddd})
);
wall.position.set(0,2.5,-5);
scene.add(wall);

// --- PUERTA ---
const doorPivot = new THREE.Object3D();
doorPivot.position.set(-0.5,1,-4.9);
scene.add(doorPivot);

const door = new THREE.Mesh(
  new THREE.BoxGeometry(1,2,0.1),
  new THREE.MeshBasicMaterial({color:0x4b2f1b})
);
door.position.x = 0.5; // desplaza para bisagra
doorPivot.add(door);

// --- LÓGICA SIMPLE ---
let doorOpen=false;
document.addEventListener('keydown',e=>{
  if(e.code==='KeyE'){ doorOpen=!doorOpen; }
});

function animate(){
  requestAnimationFrame(animate);
  // animación puerta
  const target = doorOpen? -Math.PI/2 : 0;
  doorPivot.rotation.y += (target-doorPivot.rotation.y)*0.1;
  renderer.render(scene,camera);
}
animate();

addEventListener('resize',()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
