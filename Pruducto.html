<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Proyecto — Proceso de Producción y Ficha de Lote</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#60a5fa;
    --glass: rgba(255,255,255,0.03);
    --card-radius:18px;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,#081020 0%, #071424 60%);color:#e6eef6;margin:0;padding:24px;line-height:1.45}
  .wrap{max-width:1100px;margin:0 auto}
  header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:20px}
  header h1{font-size:20px;margin:0}
  header p{margin:0;color:var(--muted);font-size:13px}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
  @media (max-width:920px){.grid{grid-template-columns:1fr}}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:var(--card-radius);box-shadow:0 6px 18px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
  h2{margin-top:0}
  .muted{color:var(--muted);font-size:13px}
  .section{margin-bottom:18px}
  .flowchart {background:var(--glass);padding:12px;border-radius:12px;overflow:auto}
  .flow-node{padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.02);display:inline-block;margin:8px}
  ul{padding-left:18px}
  .ods-list{display:flex;gap:8px;flex-wrap:wrap}
  .ods{padding:8px 10px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-weight:600;font-size:13px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px dashed rgba(255,255,255,0.03);text-align:left}
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
  textarea{min-height:80px;resize:vertical}
  .btn{display:inline-block;padding:8px 12px;border-radius:10px;background:linear-gradient(180deg,var(--accent),#3b82f6);color:#04263a;font-weight:700;border:none;cursor:pointer}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
  .small{font-size:13px;color:var(--muted)}
  footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}
  /* Flow SVG styles */
  .flow-svg{width:100%;height:260px}
  /* Presentation notes */
  .notes{background:linear-gradient(180deg,#071327, #071b2b);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);font-size:14px}
  /* responsive utility */
  .stack{display:flex;gap:10px}
  @media (max-width:520px){ .stack{flex-direction:column} .card{padding:14px}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>Proyecto — Proceso de producción & Ficha de lote</h1>
      <p class="muted">Plantilla preparada para exposición oral y entrega — edítala con los datos de tu producto.</p>
    </div>
    <div class="small muted">Versión: plantilla — copia local</div>
  </header>

  <main class="grid">
    <section class="card">
      <!-- 1. Presentación y justificación -->
      <div class="section">
        <h2>1. Presentación y justificación del producto</h2>
        <p class="muted">Rellena los campos con el nombre y descripción reales de tu producto.</p>
        <div>
          <label class="small">Nombre del producto</label>
          <input id="producto-nombre" value="Nombre del producto (EDITAR)" />
        </div>
        <div style="margin-top:8px">
          <label class="small">Descripción breve</label>
          <textarea id="producto-descripcion">Breve descripción del producto y su propósito. (EDITAR)</textarea>
        </div>
        <div style="margin-top:8px">
          <label class="small">Justificación</label>
          <textarea id="producto-justificacion">Explique por qué habéis elegido este producto, qué necesidades cubre y qué competencias trabajáis. (EDITAR)</textarea>
        </div>
      </div>

      <!-- 2. Parte técnica / proceso -->
      <div class="section">
        <h2>2. Parte técnica</h2>
        <p class="muted">Descripción paso a paso del proceso de producción y plan de ensayos/controles.</p>

        <h3 style="margin-bottom:6px">2.1 Descripción del proceso</h3>
        <ol id="proceso-list">
          <li><strong>Investigación</strong>: análisis del producto y selección de materias primas.</li>
          <li><strong>Diseño del prototipo</strong>: bocetos, prototipado y pruebas iniciales.</li>
          <li><strong>Producción del lote</strong>: elaboración siguiendo receta/plan de fabricación.</li>
          <li><strong>Controles de calidad</strong>: ensayos y mediciones (ver plan abajo).</li>
          <li><strong>Evaluación final</strong>: ajustes y envasado.</li>
        </ol>

        <h3 style="margin-top:10px">2.2 Diagrama de flujo / Plan de ensayos</h3>
        <div class="flowchart" aria-hidden="false">
          <!-- SVG flowchart -->
          <svg class="flow-svg" viewBox="0 0 1000 260" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Diagrama de flujo del proceso">
            <!-- nodes -->
            <rect x="20" y="18" rx="10" ry="10" width="180" height="36" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.03)"></rect>
            <text x="110" y="42" fill="#cfe6ff" font-size="13" text-anchor="middle">Investigación</text>

            <rect x="220" y="18" rx="10" ry="10" width="180" height="36" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.03)"></rect>
            <text x="310" y="42" fill="#cfe6ff" font-size="13" text-anchor="middle">Diseño del prototipo</text>

            <rect x="420" y="18" rx="10" ry="10" width="180" height="36" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.03)"></rect>
            <text x="510" y="42" fill="#cfe6ff" font-size="13" text-anchor="middle">Producción del lote</text>

            <rect x="620" y="18" rx="10" ry="10" width="200" height="36" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.03)"></rect>
            <text x="720" y="42" fill="#cfe6ff" font-size="13" text-anchor="middle">Controles de calidad</text>

            <rect x="840" y="18" rx="10" ry="10" width="140" height="36" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.03)"></rect>
            <text x="910" y="42" fill="#cfe6ff" font-size="13" text-anchor="middle">Producto final</text>

            <!-- arrows -->
            <defs>
              <marker id="arrow" markerWidth="8" markerHeight="8" refX="8" refY="4" orient="auto">
                <path d="M0,0 L8,4 L0,8 z" fill="#9fc7ff" />
              </marker>
            </defs>

            <line x1="200" y1="36" x2="220" y2="36" stroke="#9fc7ff" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="400" y1="36" x2="420" y2="36" stroke="#9fc7ff" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="600" y1="36" x2="620" y2="36" stroke="#9fc7ff" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="820" y1="36" x2="840" y2="36" stroke="#9fc7ff" stroke-width="2" marker-end="url(#arrow)"/>

            <!-- decision / loop -->
            <rect x="420" y="100" width="220" height="60" rx="10" ry="10" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.03)"></rect>
            <text x="530" y="125" fill="#cfe6ff" font-size="13" text-anchor="middle">¿Controles OK?</text>
            <line x1="530" y1="160" x2="530" y2="200" stroke="#9fc7ff" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="530" y="220" fill="#9aa4b2" font-size="12" text-anchor="middle">Si falla → Corrección</text>
            <line x1="610" y1="160" x2="760" y2="160" stroke="#9fc7ff" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="830" y="160" fill="#9aa4b2" font-size="12" text-anchor="start">Si OK → Envasado / Salida</text>

          </svg>
        </div>

        <h4 style="margin-top:12px">Plan de ensayos (ejemplos)</h4>
        <ul>
          <li>Control físico (peso/tamaño) → Cada lote.</li>
          <li>Control químico (si procede) → 1 muestra/10kg o según normativa.</li>
          <li>Prueba de estabilidad / vida útil → Ensayos a 7/14/30 días.</li>
        </ul>
      </div>

      <!-- 3. Sostenibilidad -->
      <div class="section">
        <h2>3. Sostenibilidad</h2>
        <p class="muted">Relaciona el proyecto con los ODS y describe medidas sostenibles aplicadas.</p>

        <div style="margin-top:8px">
          <label class="small">ODS relacionados (marca los que apliquen)</label>
          <div class="ods-list" style="margin-top:6px">
            <div class="ods">ODS 3 Salud</div>
            <div class="ods">ODS 6 Agua limpia</div>
            <div class="ods">ODS 7 Energía</div>
            <div class="ods">ODS 9 Industria</div>
            <div class="ods">ODS 11 Ciudades</div>
            <div class="ods">ODS 12 Producción responsable</div>
            <div class="ods">ODS 13 Acción climática</div>
          </div>
        </div>

        <h4 style="margin-top:10px">Decisiones sostenibles aplicadas</h4>
        <ul>
          <li>Elección de materias primas con menor huella (recicladas/renovables).</li>
          <li>Envases reducidos y compostables / reciclables.</li>
          <li>Optimización de procesos para reducir desperdicio y consumo energético.</li>
          <li>Reuso de subproductos cuando sea posible.</li>
        </ul>

        <h4 style="margin-top:10px">Evaluación del impacto y mejoras</h4>
        <p class="small muted">Resumen: identificar la principal fuente de impacto (ej. energía, transporte, envase) y proponer acciones concretas.</p>
        <ul>
          <li>Impacto mayor: consumo energético → mejora: maquinaria eficiente o energía renovable.</li>
          <li>Impacto menor: envases → mejora: cambiar a material compostable.</li>
          <li>Proyección: escalar a producción con auditoría ambiental y cálculo de huella de carbono.</li>
        </ul>
      </div>

      <!-- 4. Notas de exposición (guion) -->
      <div class="section">
        <h2>4. Guion para la exposición oral</h2>
        <div class="notes">
          <strong>Inicio (30s):</strong> Presenta el producto (nombre, función y por qué es útil).<br>
          <strong>Contexto (45s):</strong> Justificación y objetivos del proyecto. Incluye ODS relevantes.<br>
          <strong>Parte técnica (1:30):</strong> Explica el diagrama de flujo y el plan de ensayos; comenta la ficha de lote.<br>
          <strong>Sostenibilidad (45s):</strong> Señala decisiones sostenibles y mejoras propuestas.<br>
          <strong>Cierre (30s):</strong> Resultado final, posibles mejoras y abrir a preguntas. Tiempo total recomendado: 4-5 minutos.
        </div>
      </div>
    </section>

    <!-- right column -->
    <aside>
      <div class="card" style="margin-bottom:16px">
        <h2>Ficha de lote (rellenable)</h2>
        <p class="muted">Rellena los campos y pulsa "Generar CSV" para descargar la ficha en formato lote.</p>

        <div style="margin-top:8px">
          <label class="small">Número de lote</label>
          <input id="lote-num" value="L-0001" />
        </div>
        <div style="margin-top:8px">
          <label class="small">Fecha de producción</label>
          <input id="lote-fecha" type="date" />
        </div>
        <div style="margin-top:8px">
          <label class="small">Cantidad producida</label>
          <input id="lote-cant" value="100" />
        </div>
        <div style="margin-top:8px">
          <label class="small">Materia prima (lista)</label>
          <textarea id="lote-mp" placeholder="Ej: Harina 20kg; Azúcar 5kg; Agua 2L">Harina 20kg; Azúcar 5kg; Agua 2L</textarea>
        </div>
        <div style="margin-top:8px">
          <label class="small">Controles realizados / resultados</label>
          <textarea id="lote-controles">Control físico OK; pH 6.8; Peso medio: 45g</textarea>
        </div>
        <div style="margin-top:8px">
          <label class="small">Observaciones</label>
          <textarea id="lote-obs">Observaciones relevantes del día de producción.</textarea>
        </div>

        <div style="margin-top:10px" class="controls">
          <button class="btn" id="download-csv">Generar CSV</button>
          <button class="btn ghost" id="fill-sample">Rellenar ejemplo</button>
        </div>

        <div style="margin-top:12px">
          <h4 style="margin:6px 0">Vista previa (Ficha de lote)</h4>
          <table>
            <tbody id="preview-table">
              <tr><th>Producto</th><td id="prev-producto">—</td></tr>
              <tr><th>Nº lote</th><td id="prev-lote">—</td></tr>
              <tr><th>Fecha</th><td id="prev-fecha">—</td></tr>
              <tr><th>Cantidad</th><td id="prev-cant">—</td></tr>
              <tr><th>Materia prima</th><td id="prev-mp">—</td></tr>
              <tr><th>Controles</th><td id="prev-controles">—</td></tr>
              <tr><th>Observaciones</th><td id="prev-obs">—</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <h3>Checklist rápida para la presentación</h3>
        <ul>
          <li>Portada con nombre del producto y equipo.</li>
          <li>Justificación clara (por qué y para quién).</li>
          <li>Diagrama de flujo visible y explicado.</li>
          <li>Ficha de lote completa y descargable.</li>
          <li>ODS y medidas sostenibles descritas.</li>
          <li>Guion para la exposición con tiempos claros.</li>
        </ul>

        <div style="margin-top:10px">
          <button class="btn" id="export-pdf" title="Imprime la página desde el navegador">Imprimir / Guardar PDF</button>
        </div>
      </div>
    </aside>
  </main>

  <footer>
    Plantilla generada automáticamente — edita los textos y guarda una copia local antes de entregar.
  </footer>
</div>

<script>
  // Init default date to today
  (function(){
    const dateInput = document.getElementById('lote-fecha');
    if(dateInput){
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth()+1).padStart(2,'0');
      const dd = String(today.getDate()).padStart(2,'0');
      dateInput.value = yyyy + '-' + mm + '-' + dd;
    }
  })();

  // Preview update function
  function updatePreview(){
    document.getElementById('prev-producto').innerText = document.getElementById('producto-nombre').value || '—';
    document.getElementById('prev-lote').innerText = document.getElementById('lote-num').value || '—';
    document.getElementById('prev-fecha').innerText = document.getElementById('lote-fecha').value || '—';
    document.getElementById('prev-cant').innerText = document.getElementById('lote-cant').value || '—';
    document.getElementById('prev-mp').innerText = document.getElementById('lote-mp').value || '—';
    document.getElementById('prev-controles').innerText = document.getElementById('lote-controles').value || '—';
    document.getElementById('prev-obs').innerText = document.getElementById('lote-obs').value || '—';
  }

  // Hook inputs
  ['producto-nombre','lote-num','lote-fecha','lote-cant','lote-mp','lote-controles','lote-obs'].forEach(id=>{
    const el = document.getElementById(id);
    if(el) el.addEventListener('input', updatePreview);
  });

  // Initial preview
  updatePreview();

  // Fill sample
  document.getElementById('fill-sample').addEventListener('click', function(){
    document.getElementById('producto-nombre').value = 'Galleta energética ecológica';
    document.getElementById('producto-descripcion').value = 'Galleta para deportistas hecha con harina integral, miel y semillas. Formato bolsillo.';
    document.getElementById('producto-justificacion').value = 'Producto elegido por su facilidad de elaboración y su relación con hábitos saludables y sostenibles.';
    document.getElementById('lote-num').value = 'L-2025-11-10-01';
    document.getElementById('lote-fecha').valueAsDate = new Date();
    document.getElementById('lote-cant').value = '120';
    document.getElementById('lote-mp').value = 'Harina integral 24kg; Miel 6kg; Semillas 1.2kg; Aceite 1L';
    document.getElementById('lote-controles').value = 'Peso medio 42g ±2g; pH 6.5; Olor y aspecto OK';
    document.getElementById('lote-obs').value = 'Todo correcto. Empaquetado en bolsa compostable.';
    updatePreview();
  });

  // Generate CSV and download
  document.getElementById('download-csv').addEventListener('click', function(){
    const data = {
      producto: document.getElementById('producto-nombre').value,
      descripcion: document.getElementById('producto-descripcion').value,
      justificacion: document.getElementById('producto-justificacion').value,
      lote: document.getElementById('lote-num').value,
      fecha: document.getElementById('lote-fecha').value,
      cantidad: document.getElementById('lote-cant').value,
      materia_prima: document.getElementById('lote-mp').value,
      controles: document.getElementById('lote-controles').value,
      observaciones: document.getElementById('lote-obs').value
    };

    // Build CSV content (simple)
    const rows = [
      ['Campo','Valor'],
      ['Producto', data.producto],
      ['Descripción', data.descripcion],
      ['Justificación', data.justificacion],
      ['Número de lote', data.lote],
      ['Fecha producción', data.fecha],
      ['Cantidad producida', data.cantidad],
      ['Materia prima (lista)', data.materia_prima],
      ['Controles realizados', data.controles],
      ['Observaciones', data.observaciones]
    ];

    const csvContent = rows.map(r => r.map(cell => '"' + String(cell).replace(/"/g,'""') + '"').join(',')).join('\\n');
    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    const fname = (data.producto || 'ficha') + '_' + (data.lote || 'lote') + '.csv';
    a.download = fname.replace(/\\s+/g,'_');
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  });

  // Print/export
  document.getElementById('export-pdf').addEventListener('click', function(){
    window.print();
  });

  // Keyboard shortcut: Ctrl+S to save HTML (browser will open Save dialog)
  document.addEventListener('keydown', function(e){
    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
      e.preventDefault();
      alert('Usa "Guardar como..." en tu navegador para guardar esta página localmente (HTML).');
    }
  });
</script>
</body>
</html>
