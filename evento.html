<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ„ Evento de Navidad â€” Pekeweb</title>
<style>
  body{
    margin:0; padding:0;
    font-family:Arial,sans-serif;
    color:#fff;
    background: linear-gradient(180deg,#0b1a2a 0%,#123456 100%);
    overflow-x:hidden;
    position:relative;
  }
  header{
    text-align:center;
    padding:20px;
    font-size:2rem;
    font-weight:bold;
    text-shadow:0 0 15px rgba(255,255,255,0.4);
  }
  .container{
    max-width:1100px; margin:0 auto; padding:20px;
  }
  h2{text-shadow:0 0 10px rgba(255,255,255,0.3);}
  .calendar{display:grid; grid-template-columns: repeat(6,1fr); gap:10px; margin-bottom:30px;}
  .day{
    background:#1d3557; border-radius:10px; padding:20px; text-align:center;
    font-size:1.4rem; cursor:pointer; transition:0.3s; border:2px solid rgba(255,255,255,0.2);
    user-select:none;
  }
  .day.disabled{background:#15263a; cursor:not-allowed; opacity:0.4;}
  .day.opened{background:#2a9d8f; transform:scale(1.05);}
  .coleccionables-grid{
    display:grid; grid-template-columns: repeat(auto-fill,minmax(80px,1fr)); gap:10px; margin-top:10px;
  }
  .item-col{
    background:#1d2a38; padding:10px; border-radius:10px; text-align:center; font-size:1.6rem;
    border:2px solid rgba(255,255,255,0.2);
  }
  .item-col.locked{opacity:0.4; filter:grayscale(100%);}
  .snow-container{
    margin-top:20px; background:#162330; border-radius:10px; padding:15px;
    border:1px solid rgba(255,255,255,0.2);
  }
  .snow-list div{padding:5px; margin:3px 0; border-bottom:1px dashed rgba(255,255,255,0.2);}
  .hidden-snowman{
    font-size:2rem; position:absolute; cursor:pointer; transition:0.25s; z-index:999;
  }
  .hidden-snowman.catched{opacity:0; transform:scale(0);}
  #resetBtn{
    margin-top:15px; padding:8px 12px; background:#b31e1e; color:#fff; border:none; border-radius:6px;
    cursor:pointer; font-weight:bold;
  }
</style>
</head>
<body>
<header>ğŸ„ Evento de Navidad â€” Pekeweb ğŸ</header>

<div class="container">
  <h2>ğŸ… Calendario de Adviento</h2>
  <div class="calendar" id="calendar"></div>

  <h2>â­ Coleccionables</h2>
  <div class="coleccionables-grid" id="coleccionables"></div>

  <div class="snow-container">
    <h2>â›„ MuÃ±ecos de nieve recogidos</h2>
    <p>Total: <b id="snowCount">0</b></p>
    <div class="snow-list" id="snowList"></div>
  </div>

  <button id="resetBtn">ğŸ”„ Reiniciar evento</button>
</div>

<!-- Ejemplo: 5 muÃ±ecos de nieve de la zona actual -->
<div class="hidden-snowman" data-id="1" style="top:20vh; left:15vw;">â›„</div>
<div class="hidden-snowman" data-id="2" style="top:40vh; left:25vw;">â›„</div>
<div class="hidden-snowman" data-id="3" style="top:60vh; left:35vw;">â›„</div>
<div class="hidden-snowman" data-id="4" style="top:30vh; left:70vw;">â›„</div>
<div class="hidden-snowman" data-id="5" style="top:70vh; left:60vw;">â›„</div>

<script>
/* ========================
   CONFIGURACION
======================== */
const totalSnowmenPerZone = 5;
const snowmenPerCollectible = 5; // cada 5 muÃ±ecos = 1 coleccionable
const totalCalendarCollectibles = 12;

const emojiCollectibles = ["ğŸ","ğŸ„","â›„","â„ï¸","ğŸ¦Œ","ğŸª","ğŸ•¯ï¸","ğŸ…","ğŸŒŸ","ğŸ§¦","ğŸ«","ğŸ””","ğŸ¥‚","ğŸ›·","ğŸ¶","ğŸ·","ğŸ­","ğŸŒ²","ğŸ‰","ğŸ©","ğŸ¦","ğŸ¨"];
// total 22 posibles emojis (10 de muÃ±ecos + 12 calendario)

/* ========================
   LOCALSTORAGE
======================== */
let daysOpened = JSON.parse(localStorage.getItem("daysOpened")) || [];
let collectedSnowmenIDs = JSON.parse(localStorage.getItem("collectedSnowmenIDs")) || [];
let snowmen = JSON.parse(localStorage.getItem("snowmen")) || [];
let collectibles = JSON.parse(localStorage.getItem("collectibles")) || [];

if(!collectibles.length){
  // Inicializamos 22 coleccionables
  for(let i=0; i<emojiCollectibles.length; i++){
    collectibles.push({id:i+1, emoji:emojiCollectibles[i], unlocked:false});
  }
  localStorage.setItem("collectibles", JSON.stringify(collectibles));
}

/* ========================
   CALENDARIO DE ADVIENTO
======================== */
const today = new Date();
const currentDay = today.getDate();
const currentMonth = today.getMonth(); // 11 = diciembre
const calendarEl = document.getElementById("calendar");

const dailyContent = {
  1:{type:"collectible", itemId:11},
  3:{type:"collectible", itemId:12},
  5:{type:"collectible", itemId:13},
  7:{type:"collectible", itemId:14},
  9:{type:"collectible", itemId:15},
  11:{type:"collectible", itemId:16},
  13:{type:"collectible", itemId:17},
  15:{type:"collectible", itemId:18},
  17:{type:"collectible", itemId:19},
  19:{type:"collectible", itemId:20},
  21:{type:"collectible", itemId:21},
  23:{type:"collectible", itemId:22},
};

/* ========================
   RENDER CALENDARIO
======================== */
for(let i=1;i<=24;i++){
  let day = document.createElement("div");
  day.classList.add("day");
  day.textContent = i;

  if(currentMonth!==11 || i>currentDay){
    day.classList.add("disabled");
  }

  if(daysOpened.includes(i)){
    day.classList.add("opened");
    day.textContent="ğŸ";
  }

  day.addEventListener("click", ()=>{
    if(day.classList.contains("disabled")) return;
    day.classList.add("opened");
    day.textContent="ğŸ";
    if(!daysOpened.includes(i)){
      daysOpened.push(i);
      localStorage.setItem("daysOpened", JSON.stringify(daysOpened));
    }
    const content = dailyContent[i];
    if(content && content.type==="collectible") unlockCollectible(content.itemId);
    if(content && content.type==="message") alert(content.text);
  });

  calendarEl.appendChild(day);
}

/* ========================
   COLECCIONABLES
======================== */
const collectiblesEl = document.getElementById("coleccionables");
function renderCollectibles(){
  collectiblesEl.innerHTML="";
  collectibles.forEach(c=>{
    let div=document.createElement("div");
    div.classList.add("item-col");
    if(!c.unlocked) div.classList.add("locked");
    div.textContent = c.unlocked?c.emoji:"???";
    collectiblesEl.appendChild(div);
  });
}
renderCollectibles();

function unlockCollectible(id){
  if(collectibles[id-1] && !collectibles[id-1].unlocked){
    collectibles[id-1].unlocked=true;
    localStorage.setItem("collectibles", JSON.stringify(collectibles));
    renderCollectibles();
    alert("Â¡Coleccionable desbloqueado! "+collectibles[id-1].emoji);
  }
}

/* ========================
   MUÃ‘ECOS ESCONDIDOS
======================== */
const snowListEl=document.getElementById("snowList");
const snowCountEl=document.getElementById("snowCount");

function updateSnowList(){
  snowListEl.innerHTML="";
  snowmen.forEach((n)=>{let div=document.createElement("div"); div.textContent=n; snowListEl.appendChild(div);});
  snowCountEl.textContent=snowmen.length;
}
updateSnowList();

document.querySelectorAll(".hidden-snowman").forEach(sm=>{
  const id=sm.dataset.id;
  if(collectedSnowmenIDs.includes(id)){sm.style.display="none";}
  sm.addEventListener("click",()=>{
    if(collectedSnowmenIDs.includes(id)) return;
    sm.classList.add("catched");
    setTimeout(()=>sm.style.display="none",200);
    snowmen.push("â›„");
    collectedSnowmenIDs.push(id);
    localStorage.setItem("snowmen", JSON.stringify(snowmen));
    localStorage.setItem("collectedSnowmenIDs", JSON.stringify(collectedSnowmenIDs));
    updateSnowList();
    if(snowmen.length % snowmenPerCollectible===0){
      const collectibleId = snowmen.length / snowmenPerCollectible;
      unlockCollectible(collectibleId);
    }
  });
});

/* ========================
   BOTON REINICIO
======================== */
document.getElementById("resetBtn").addEventListener("click",()=>{
  localStorage.removeItem("daysOpened");
  localStorage.removeItem("snowmen");
  localStorage.removeItem("collectedSnowmenIDs");
  localStorage.removeItem("collectibles");
  alert("Evento reiniciado, recarga la pÃ¡gina para empezar de nuevo.");
});
</script>

</body>
</html>
