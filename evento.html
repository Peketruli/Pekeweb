<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Evento de Navidad â€” Pekeweb</title>

<style>
  body{
    margin:0;
    padding:0;
    font-family:Arial, sans-serif;
    color:#fff;
    background: linear-gradient(180deg, #0b1a2a 0%, #123456 100%);
    background-attachment: fixed;
    overflow-x:hidden;
    position:relative;
  }

  body::before{
    content:"";
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events:none;
    background:
      radial-gradient(circle at 10% 20%, rgba(255,255,255,0.08) 0, transparent 40%),
      radial-gradient(circle at 80% 70%, rgba(255,255,255,0.05) 0, transparent 40%),
      radial-gradient(circle at 40% 90%, rgba(255,255,255,0.07) 0, transparent 40%);
    animation: snowfall 8s linear infinite;
  }

  @keyframes snowfall {
    0% {transform: translateY(-10px);}
    100% {transform: translateY(10px);}
  }

  header{
    text-align:center;
    padding:30px 10px;
    font-size:2.2rem;
    font-weight: bold;
    text-shadow:0 0 15px rgba(255,255,255,0.4);
  }

  .container{
    max-width:1100px;
    margin:0 auto;
    padding:20px;
  }

  #alertaMes{
    background:#b31e1e;
    padding:15px;
    border-radius:10px;
    margin-bottom:20px;
    display:none;
    text-align:center;
    font-weight:bold;
  }

  .calendar{
    display:grid;
    grid-template-columns: repeat(6,1fr);
    gap:10px;
    margin-bottom:30px;
  }

  .day{
    background:#1d3557;
    border-radius:10px;
    padding:20px;
    text-align:center;
    font-size:1.4rem;
    cursor:pointer;
    transition:0.3s;
    border:2px solid rgba(255,255,255,0.2);
    user-select:none;
  }

  .day.disabled{
    background:#15263a;
    cursor:not-allowed;
    opacity:0.4;
  }

  .day.opened{
    background:#2a9d8f;
    transform: scale(1.05);
  }

  h2{
    margin-top:40px;
    text-shadow:0 0 10px rgba(255,255,255,0.3);
  }

  .coleccionables-grid{
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(120px,1fr));
    gap:15px;
    margin-top:15px;
  }

  .item-col{
    background:#1d2a38;
    padding:10px;
    border-radius:10px;
    text-align:center;
    border:2px solid rgba(255,255,255,0.2);
  }

  .item-col.locked{
    opacity:0.4;
    filter: grayscale(100%);
  }

  .snow-container{
    margin-top:30px;
    background:#162330;
    border-radius:10px;
    padding:20px;
    border:1px solid rgba(255,255,255,0.2);
  }

  .snow-list div{
    padding:5px;
    margin:5px 0;
    border-bottom:1px dashed rgba(255,255,255,0.2);
  }

  /* MUÃ‘ECOS ESCONDIDOS */
  .snowman-hidden{
    position:absolute;
    font-size:2rem;
    cursor:pointer;
    transition:0.3s;
    user-select:none;
  }

  .snowman-hidden:hover{
    transform:scale(1.2);
  }

</style>
</head>

<body>

<header>ğŸ„ Evento de Navidad â€” Pekeweb ğŸ</header>

<!-- MUÃ‘ECOS DE NIEVE ESCONDIDOS -->
<div class="snowman-hidden" style="top:150px; left:40px;">â›„</div>
<div class="snowman-hidden" style="top:380px; right:80px;">â›„</div>
<div class="snowman-hidden" style="top:700px; left:50%;">â›„</div>
<div class="snowman-hidden" style="bottom:200px; left:200px;">â›„</div>
<div class="snowman-hidden" style="top:900px; right:30%;">â›„</div>

<div class="container">
  
  <div id="alertaMes">âŒ El calendario solo estÃ¡ disponible en DICIEMBRE.</div>

  <h2>ğŸ… Calendario de Adviento</h2>
  <div class="calendar" id="calendar"></div>

  <h2>â­ Coleccionables</h2>
  <div class="coleccionables-grid" id="coleccionables"></div>

  <div class="snow-container">
    <h2>â›„ MuÃ±ecos de nieve recogidos</h2>
    <p>Total: <span id="snowCount">0</span></p>
    <div class="snow-list" id="snowList"></div>
  </div>

</div>

<script>
  // =======================
//      COLECCIONABLES
// =======================

let coleccion = JSON.parse(localStorage.getItem("coleccionables")) || [
  { id:1, nombre:"ğŸ„ Ãrbol de Navidad", unlocked:false },
  { id:2, nombre:"ğŸ Regalo", unlocked:false },
  { id:3, nombre:"â„ï¸ Copo de nieve", unlocked:false },
  { id:4, nombre:"â­ Estrella", unlocked:false },
  { id:5, nombre:"ğŸ­ BastÃ³n de caramelo", unlocked:false },
  { id:6, nombre:"ğŸ… Gorro navideÃ±o", unlocked:false },
  { id:7, nombre:"â›„ MuÃ±eco de nieve", unlocked:false },
  { id:8, nombre:"ğŸ¦Œ Reno", unlocked:false },

  // Ã‰PICOS (pixel art)
  { id:9, nombre:"ğŸ€ Corona NavideÃ±a", unlocked:false },
  { id:10, nombre:`ğŸ•¯ï¸ Vela
â¬›â¬›ğŸ•¯ï¸â¬›â¬›
â¬›ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸â¬›
ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸
â¬›ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸â¬›
â¬›â¬›ğŸ•¯ï¸â¬›â¬›`, unlocked:false },

  { id:11, nombre:`ğŸ”” Campana
â¬›â¬›ğŸ””â¬›â¬›
â¬›ğŸ””ğŸ””ğŸ””â¬›
ğŸ””ğŸ””ğŸ””ğŸ””ğŸ””
â¬›ğŸ””ğŸ””ğŸ””â¬›
â¬›â¬›ğŸ””â¬›â¬›`, unlocked:false },

  { id:12, nombre:`ğŸŸ¢ Bola
â¬›â¬›ğŸŸ¢â¬›â¬›
â¬›ğŸŸ¢ğŸŸ¢ğŸŸ¢â¬›
ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢
â¬›ğŸŸ¢ğŸŸ¢ğŸŸ¢â¬›
â¬›â¬›ğŸŸ¢â¬›â¬›`, unlocked:false }
];

saveColeccion();

function saveColeccion(){
  localStorage.setItem("coleccionables", JSON.stringify(coleccion));
}


// =======================
//      CALENDARIO
// =======================

const today = new Date();
const currentDay = today.getDate();
const daysOpened = JSON.parse(localStorage.getItem("daysOpened")) || [];

const dailyContent = {
  1:{type:"collectible", itemId:1},
  3:{type:"message", text:"Â¡Gracias por seguir aquÃ­! ğŸ„"},
  5:{type:"collectible", itemId:2},
  7:{type:"collectible", itemId:3},
  9:{type:"message", text:"Â¡Feliz Navidad anticipada! ğŸ"},
  11:{type:"collectible", itemId:4},
  13:{type:"collectible", itemId:5},
  15:{type:"message", text:"Gracias por estar aquÃ­ ğŸ…"},
  17:{type:"collectible", itemId:6},
  19:{type:"collectible", itemId:7},
  21:{type:"message", text:"Casi es Navidadâ€¦ ğŸ„"},
  23:{type:"collectible", itemId:8},
  24:{type:"collectible", itemId:12, special:true}
};

function renderCalendar(){
  const cal = document.getElementById("calendario");
  for(let i = 1; i <= 24; i++){
    const day = document.createElement("div");
    day.classList.add("day");
    day.textContent = i;

    if(i > currentDay) day.classList.add("disabled");
    if(daysOpened.includes(i)){
      day.classList.add("opened");
      day.textContent = "ğŸ";
    }

    day.addEventListener("click", () => {
      if(i > currentDay) return;
      if(day.classList.contains("opened")) return;

      day.classList.add("opened");
      day.textContent = "ğŸ";

      if(!daysOpened.includes(i)){
        daysOpened.push(i);
        localStorage.setItem("daysOpened", JSON.stringify(daysOpened));
      }

      const content = dailyContent[i];
      if(content) showContent(content);
    });

    cal.appendChild(day);
  }
}

renderCalendar();


// =======================
//      CONTENIDO DIARIO
// =======================

function showContent(content){
  if(content.type === "message"){
    alert(content.text);
  }

  if(content.type === "collectible"){
    unlockCollectible(content.itemId);
    if(content.special){
      alert("ğŸ„ Â¡Coleccionable especial desbloqueado! ğŸ„");
    }
  }
}


// =======================
//      DESBLOQUEAR
// =======================

function unlockCollectible(id){
  const col = coleccion.find(c => c.id === id);
  if(col && !col.unlocked){
    col.unlocked = true;
    saveColeccion();
    alert("ğŸ”“ Coleccionable obtenido:\n" + col.nombre);
  }
  renderColeccionables();
}


// =======================
//      ZONA DE LISTA
// =======================

function renderColeccionables(){
  const list = document.getElementById("coleccionables");
  list.innerHTML = "";

  coleccion.forEach(c => {
    const div = document.createElement("div");
    div.classList.add("coleccionable");

    if(!c.unlocked) div.textContent = "ğŸ”’ Coleccionable bloqueado";
    else div.textContent = c.nombre;

    list.appendChild(div);
  });
}

renderColeccionables();


// =======================
//   MUÃ‘ECOS DE NIEVE
// =======================

let collectedIDs = JSON.parse(localStorage.getItem("collectedSnowmenIDs")) || [];
let snowmen = JSON.parse(localStorage.getItem("snowmen")) || [];

document.querySelectorAll(".snowman-hidden").forEach((m, index) => {

  if(collectedIDs.includes(index)){
    m.style.opacity = "0";
    m.style.pointerEvents = "none";
  }

  m.addEventListener("click", () => {

    const name = "MuÃ±eco #" + (snowmen.length + 1);
    snowmen.push(name);
    localStorage.setItem("snowmen", JSON.stringify(snowmen));
    renderSnowmenList();

    collectedIDs.push(index);
    localStorage.setItem("collectedSnowmenIDs", JSON.stringify(collectedIDs));

    m.style.opacity = "0";
    m.style.pointerEvents = "none";

    if(snowmen.length % 5 === 0){
      unlockNextCollectible();
    }
  });
});


function renderSnowmenList(){
  const list = document.getElementById("listaMuÃ±ecos");
  list.innerHTML = "";
  snowmen.forEach(s => {
    const div = document.createElement("div");
    div.textContent = s;
    list.appendChild(div);
  });
}

renderSnowmenList();


// DESBLOQUEAR SIGUIENTE COLECCIONABLE
function unlockNextCollectible(){
  const next = coleccion.find(c => !c.unlocked);
  if(next){
    unlockCollectible(next.id);
  }
}
</script>
</body>
</html>
