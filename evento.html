<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ„ Evento de Navidad</title>
<style>
  body{
    margin:0;
    padding:0;
    font-family:Arial,sans-serif;
    color:#fff;
    background: linear-gradient(180deg, #0b1a2a 0%, #123456 100%);
    overflow-x:hidden;
    position:relative;
  }

  header{
    text-align:center;
    padding:30px 10px;
    font-size:2rem;
    font-weight:bold;
    text-shadow:0 0 15px rgba(255,255,255,0.4);
  }

  .container{
    max-width:1100px;
    margin:0 auto;
    padding:20px;
  }

  #alertaMes{
    background:#b31e1e;
    padding:15px;
    border-radius:10px;
    margin-bottom:20px;
    display:none;
    text-align:center;
    font-weight:bold;
  }

  .calendar{
    display:grid;
    grid-template-columns: repeat(6,1fr);
    gap:10px;
    margin-bottom:30px;
  }

  .day{
    background:#1d3557;
    border-radius:10px;
    padding:20px;
    text-align:center;
    font-size:1.4rem;
    cursor:pointer;
    transition:0.3s;
    border:2px solid rgba(255,255,255,0.2);
    user-select:none;
  }

  .day.disabled{
    background:#15263a;
    cursor:not-allowed;
    opacity:0.4;
  }

  .day.opened{
    background:#2a9d8f;
    transform:scale(1.05);
  }

  h2{
    margin-top:40px;
    text-shadow:0 0 10px rgba(255,255,255,0.3);
  }

  .coleccionables-grid{
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(120px,1fr));
    gap:15px;
    margin-top:15px;
  }

  .item-col{
    background:#1d2a38;
    padding:10px;
    border-radius:10px;
    text-align:center;
    border:2px solid rgba(255,255,255,0.2);
    font-size:1.5rem;
  }

  .item-col.locked{
    opacity:0.4;
    filter:grayscale(100%);
  }

  .snow-container{
    margin-top:30px;
    background:#162330;
    border-radius:10px;
    padding:20px;
    border:1px solid rgba(255,255,255,0.2);
  }

  .snow-list div{
    padding:5px;
    margin:5px 0;
    border-bottom:1px dashed rgba(255,255,255,0.2);
  }

  /* MUÃ‘ECOS ESCONDIDOS */
  .hidden-snowman{
    font-size:2rem;
    position:absolute;
    cursor:pointer;
    transition:0.25s;
    z-index:9999;
    user-select:none;
  }

  .hidden-snowman.catched{
    opacity:0;
    transform:scale(0);
  }

  #resetBtn{
    margin:20px 0;
    padding:10px 15px;
    background:#b31e1e;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
  }
</style>
</head>
<body>

<header>ğŸ„ Evento de Navidad â€” Pekeweb ğŸ</header>

<button id="resetBtn">ğŸ”„ Reiniciar evento</button>

<div class="container">
  <div id="alertaMes">âŒ El calendario solo estÃ¡ disponible en DICIEMBRE.</div>

  <h2>ğŸ… Calendario de Adviento</h2>
  <div class="calendar" id="calendar"></div>

  <h2>â­ Coleccionables</h2>
  <div class="coleccionables-grid" id="coleccionables"></div>

  <div class="snow-container">
    <h2>â›„ MuÃ±ecos de nieve recogidos</h2>
    <p>Total: <b id="snowCount">0</b></p>
    <div class="snow-list" id="snowList"></div>
  </div>
</div>

<!-- 50 MUÃ‘ECOS ESCONDIDOS -->
<div id="snowmen-container"></div>

<script>
/* ========================
   CONFIGURACIÃ“N
======================== */
const today = new Date();
const currentDay = today.getDate();
const currentMonth = today.getMonth(); // 11 = diciembre
const calendar = document.getElementById("calendar");
const alertaMes = document.getElementById("alertaMes");
const coleccionables = document.getElementById("coleccionables");
const snowList = document.getElementById("snowList");
const snowCount = document.getElementById("snowCount");
const resetBtn = document.getElementById("resetBtn");

let daysOpened = JSON.parse(localStorage.getItem("daysOpened")) || [];
let snowmen = JSON.parse(localStorage.getItem("snowmen")) || [];
let collectedIDs = JSON.parse(localStorage.getItem("collectedSnowmenIDs")) || [];

/* ========================
   COLECCIONABLES
======================== */
let coleccion = JSON.parse(localStorage.getItem("coleccionables"));
if(!coleccion){
  const total = 22;
  const emojiList = ["ğŸ","ğŸ„","â›„","â„ï¸","ğŸ¦Œ","ğŸª","ğŸ•¯ï¸","ğŸ…","ğŸŒŸ","ğŸ§¦","ğŸ«","ğŸ””","ğŸ¥›","ğŸ¬","ğŸ­","ğŸ›·","ğŸ¶","ğŸ””","ğŸ¯","â„ï¸","ğŸ§¸","ğŸ"];
  coleccion = [];
  for(let i=0;i<total;i++){
    coleccion.push({id:i+1,nombre:emojiList[i],unlocked:false});
  }
  localStorage.setItem("coleccionables",JSON.stringify(coleccion));
}

function renderCollectibles(){
  coleccionables.innerHTML = "";
  coleccion.forEach(c=>{
    let div = document.createElement("div");
    div.classList.add("item-col");
    if(!c.unlocked) div.classList.add("locked");
    div.textContent = c.unlocked ? c.nombre : "???";
    coleccionables.appendChild(div);
  });
}
renderCollectibles();

function unlockCollectible(id){
  if(coleccion[id-1] && !coleccion[id-1].unlocked){
    coleccion[id-1].unlocked = true;
    localStorage.setItem("coleccionables",JSON.stringify(coleccion));
    renderCollectibles();
  }
}

/* ========================
   CALENDARIO
======================== */
const dailyContent = {
  1: {type:"collectible", itemId:11},
  2: {type:"message", text:"Feliz dÃ­a 2! ğŸ„"},
  3: {type:"collectible", itemId:12},
  4: {type:"message", text:"Ya casi llega Navidad! ğŸ"},
  5: {type:"message", text:"ğŸ…ğŸ„"},
  6: {type:"message", text:"DÃ­a 6! â„ï¸"},
  7: {type:"message", text:"DÃ­a 7! ğŸŒŸ"},
  8: {type:"message", text:"DÃ­a 8! ğŸ"},
  9: {type:"message", text:"DÃ­a 9! ğŸª"},
  10:{type:"message", text:"DÃ­a 10! ğŸ„"},
  11:{type:"message", text:"DÃ­a 11! â›„"},
  12:{type:"message", text:"DÃ­a 12! ğŸ¶"},
  13:{type:"message", text:"DÃ­a 13! ğŸ•¯ï¸"},
  14:{type:"message", text:"DÃ­a 14! ğŸ…"},
  15:{type:"message", text:"DÃ­a 15! ğŸŒŸ"},
  16:{type:"message", text:"DÃ­a 16! ğŸ"},
  17:{type:"message", text:"DÃ­a 17! â„ï¸"},
  18:{type:"message", text:"DÃ­a 18! ğŸ§¦"},
  19:{type:"message", text:"DÃ­a 19! ğŸ«"},
  20:{type:"message", text:"DÃ­a 20! ğŸ””"},
  21:{type:"message", text:"DÃ­a 21! ğŸ›·"},
  22:{type:"message", text:"DÃ­a 22! ğŸ¶"},
  23:{type:"message", text:"DÃ­a 23! ğŸ¯"},
  24:{type:"message", text:"DÃ­a 24! Â¡FELIZ NAVIDAD! ğŸ„"}
};

for(let i=1;i<=24;i++){
  let day = document.createElement("div");
  day.classList.add("day");
  day.textContent = i;

  if(currentMonth!==11){day.classList.add("disabled");alertaMes.style.display="block";}
  else if(i>currentDay){day.classList.add("disabled");}

  if(daysOpened.includes(i)){
    day.classList.add("opened");
    day.textContent="ğŸ";
  }

  day.addEventListener("click",()=>{
    if(day.classList.contains("disabled")) return;
    day.classList.add("opened");
    day.textContent="ğŸ";
    if(!daysOpened.includes(i)){
      daysOpened.push(i);
      localStorage.setItem("daysOpened",JSON.stringify(daysOpened));
    }
    const content=dailyContent[i];
    if(content){
      if(content.type==="message") alert(content.text);
      else if(content.type==="collectible"){
        unlockCollectible(content.itemId);
        alert("Â¡Coleccionable desbloqueado! â­");
      }
    }
  });
  calendar.appendChild(day);
}

/* ========================
   MUÃ‘ECOS ESCONDIDOS
======================== */
const snowContainer = document.getElementById("snowmen-container");

for(let i=1;i<=50;i++){
  let div=document.createElement("div");
  div.classList.add("hidden-snowman");
  div.dataset.id=i;
  div.textContent="â›„";
  div.style.top=(Math.random()*80+10)+"vh";
  div.style.left=(Math.random()*80+10)+"vw";
  snowContainer.appendChild(div);
}

function updateSnowList(){
  snowList.innerHTML="";
  snowmen.forEach(n=>{
    let div=document.createElement("div");
    div.textContent=n;
    snowList.appendChild(div);
  });
  snowCount.textContent=snowmen.length;
}
updateSnowList();

document.querySelectorAll(".hidden-snowman").forEach(sm=>{
  const id=sm.dataset.id;
  if(collectedIDs.includes(id)) sm.style.display="none";

  sm.addEventListener("click",()=>{
    if(collectedIDs.includes(id)) return;
    sm.classList.add("catched");
    setTimeout(()=> sm.style.display="none",200);
    snowmen.push("MuÃ±eco #" + (snowmen.length + 1));
    localStorage.setItem("snowmen",JSON.stringify(snowmen));
    collectedIDs.push(id);
    localStorage.setItem("collectedSnowmenIDs",JSON.stringify(collectedIDs));
    updateSnowList();
    if(snowmen.length%5===0){
      unlockCollectible(Math.floor(snowmen.length/5));
      alert("Has conseguido 5 muÃ±ecos â„ï¸ â†’ Coleccionable desbloqueado!");
    }
  });
});

/* ========================
   BOTÃ“N DE RESET
======================== */
resetBtn.addEventListener("click",()=>{
  if(confirm("Â¿Reiniciar evento de Navidad? Esto borrarÃ¡ todos los datos.")){
    localStorage.removeItem("daysOpened");
    localStorage.removeItem("coleccionables");
    localStorage.removeItem("snowmen");
    localStorage.removeItem("collectedSnowmenIDs");
    location.reload();
  }
});
</script>

</body>
</html>
