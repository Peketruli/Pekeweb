<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PekeOS Mejorado</title>
<style>
* { box-sizing: border-box; font-family: 'MS Sans Serif', Tahoma, sans-serif; }
body, html { margin:0; padding:0; height:100%; background:#111; color:#fff; overflow:hidden; }

/* ===== Pantalla de encendido ===== */
#powerScreen {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:#000; display:flex; align-items:center; justify-content:center; flex-direction:column;
  z-index:9999; color:#fff; cursor:pointer; transition: background 0.5s;
}
#powerScreen img {
  width:180px;
  animation:fadeIn 2s ease-in-out;
}
#powerScreen h1 {
  font-size:2em; text-shadow: 0 0 10px orange; animation: blink 1s infinite;
}
@keyframes blink { 0%,50%,100% {opacity:1;} 25%,75% {opacity:0.4;} }
@keyframes fadeIn { 0% {opacity:0; transform:scale(0.5);} 100% {opacity:1; transform:scale(1);} }

/* ===== Escritorio ===== */
.desktop {
  position:relative; height:100%; padding:16px; display:none;
  background:#111 url('') no-repeat center center; background-size:cover;
  z-index:0;
}
.icons { display:flex; flex-wrap:wrap; gap:14px; z-index:2; position:relative; }
.icon { width:70px; text-align:center; cursor:pointer; transition: transform 0.2s; }
.icon:hover { transform: scale(1.1); }
.icon .thumb { width:64px; height:64px; border:2px solid #666; background:#000; border-radius:6px;
               display:flex; align-items:center; justify-content:center; font-size:28px; }
.icon span { display:block; margin-top:6px; color:#ffe9b6; text-shadow: 0 0 2px orange; }

/* ===== Barra de tareas ===== */
.taskbar {
  position:fixed; bottom:0; left:0; right:0; height:42px;
  background:#222; border-top:3px solid #ff6f00; display:flex; align-items:center;
  padding:4px 6px; gap:8px; color:#fff; display:none;
  z-index:2;
}
.start-btn img {
  width:30px;
  height:30px;
  cursor:pointer;
}

/* ===== Ventanas y plantillas ===== */
.win { position:absolute; width:520px; background:#111; border:2px solid #ff6f00;
  box-shadow:6px 6px 0 rgba(0,0,0,.8); display:flex; flex-direction:column; color:#fff;
  animation:fadeIn 0.3s; z-index:3;
}
@keyframes fadeIn { from {opacity:0; transform:scale(0.9);} to {opacity:1; transform:scale(1);} }
.titlebar { height:28px; background:linear-gradient(#222,#111); color:#fff; display:flex; align-items:center;
  padding:0 6px; gap:8px; user-select:none; border-bottom:1px solid #555;
}
.titlebar .title { flex:1; font-size:13px; }
.titlebar .controls { display:flex; gap:6px; }
.btn { width:20px; height:20px; border:2px solid #111; background:#222; color:#fff;
  display:flex; align-items:center; justify-content:center; cursor:pointer; transition: all 0.2s;
}
.btn:hover { background:#333; }
.content { padding:0; background:#000; flex:1; overflow:hidden; display:flex; }
.content iframe { width:100%; height:100%; border:0; display:block; }

/* ===== Start menu ===== */
.start-menu { position:absolute; bottom:42px; left:6px; width:200px; background:#111; border:2px solid #ff6f00;
  display:none; flex-direction:column; color:#fff; padding:8px; box-shadow:3px 3px 0 rgba(0,0,0,0.8); z-index:4; }
.start-menu button { margin:4px 0; padding:6px; background:#222; border:1px solid #444; color:#fff; cursor:pointer; }
.start-menu button:hover { background:#333; }

/* ===== Notificaciones ===== */
.notification { position:fixed; bottom:60px; right:20px; background:#222; border:2px solid orange;
  padding:10px 14px; border-radius:4px; color:#fff; font-weight:bold; z-index:999; opacity:0;
  animation:notifyAnim 0.5s forwards; }
@keyframes notifyAnim { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

</style>
</head>
<body>

<!-- Pantalla de encendido -->
<div id="powerScreen">
  <img src="ruta/a/tu/logo.png" alt="PekeOS Logo">
  <h1>Pulsa para encender üí°</h1>
</div>

<!-- Escritorio -->
<div class="desktop">
  <div class="icons">
    <div class="icon" data-app="golf.html" data-emoji="üïπÔ∏è"><div class="thumb">üïπÔ∏è</div><span>Zona Arcade</span></div>
    <div class="icon" data-app="e.html" data-emoji="üìä"><div class="thumb">üìä</div><span>Encuestas</span></div>
    <div class="icon" data-app="c.html" data-emoji="üé∞"><div class="thumb">üé∞</div><span>Casino</span></div>
  </div>
</div>

<!-- Barra de tareas -->
<div class="taskbar">
  <div class="start-btn">
    <img src="ruta/a/tu/logo.png" alt="PekeOS">
  </div>
</div>

<!-- Start Menu -->
<div class="start-menu" id="startMenu">
  <button id="settingsBtn">Ajustes</button>
  <button id="shutdownBtn">Apagar</button>
</div>

<!-- Ventana plantilla -->
<template id="winTpl">
  <div class="win" data-wid="">
    <div class="titlebar">
      <div class="title">Ventana</div>
      <div class="controls">
        <div class="btn" data-action="min">_</div>
        <div class="btn" data-action="max">‚¨ú</div>
        <div class="btn" data-action="close">X</div>
      </div>
    </div>
    <div class="content"></div>
  </div>
</template>

<script>
// ===== Variables =====
const desktop = document.querySelector('.desktop');
const tpl = document.getElementById('winTpl');
let zIndex = 10;
let windows = {};
const powerScreen = document.getElementById('powerScreen');
const taskbar = document.querySelector('.taskbar');
const startMenu = document.getElementById('startMenu');

// ===== Encendido =====
function powerOn() {
  powerScreen.style.display='none';
  desktop.style.display='block';
  taskbar.style.display='flex';
  showNotification("¬°Bienvenido a PekeOS!");
}
powerScreen.addEventListener('click', powerOn);

// ===== Crear ventana =====
function createWindow({title='Ventana', src=null}){
  const node = tpl.content.firstElementChild.cloneNode(true);
  const wid = 'w_' + Date.now();
  node.dataset.wid = wid;
  node.style.left='60px'; node.style.top='60px';
  node.querySelector('.title').textContent = title;
  if(src){ const iframe=document.createElement('iframe'); iframe.src=src; node.querySelector('.content').appendChild(iframe); }
  makeDraggable(node); attachControls(node);
  document.body.appendChild(node); focusWindow(node);
  return node;
}

// ===== Focus ventana =====
function focusWindow(node){ node.style.zIndex = ++zIndex; node.classList.remove('minimized'); }

// ===== Controles ventana =====
function attachControls(node){
  node.querySelectorAll('.btn').forEach(b=>{
    b.addEventListener('click', ()=>{
      const action=b.dataset.action;
      if(action==='close'){ node.remove(); }
      else if(action==='min'){ node.style.display='none'; node.classList.add('minimized'); }
      else if(action==='max'){
        if(node.dataset.maxed==='1'){ node.style.width='520px'; node.style.height='360px'; node.dataset.maxed='0'; }
        else{ node.style.width=(window.innerWidth-12)+'px'; node.style.height=(window.innerHeight-72)+'px'; node.dataset.maxed='1'; }
      }
    });
  });
  node.addEventListener('mousedown', ()=>focusWindow(node));
}

// ===== Drag ventana =====
function makeDraggable(el){
  const title = el.querySelector('.titlebar');
  let ox, oy, dx, dy, drag=false;
  title.addEventListener('mousedown', (e)=>{
    drag=true; ox=e.clientX; oy=e.clientY; dx=parseInt(el.style.left)||0; dy=parseInt(el.style.top)||0;
    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', up);
  });
  function move(e){ if(!drag) return; el.style.left=(dx+(e.clientX-ox))+'px'; el.style.top=(dy+(e.clientY-oy))+'px'; }
  function up(){ drag=false; document.removeEventListener('mousemove',move); document.removeEventListener('mouseup',up); }
}

// ===== Abrir apps al doble click =====
document.querySelectorAll('.icon').forEach(ic=>{
  ic.addEventListener('dblclick', ()=>{
    createWindow({title:ic.querySelector('span').textContent, src:ic.dataset.app});
  });
});

// ===== Start menu toggle =====
document.querySelector('.start-btn img').addEventListener('click', ()=>{
  startMenu.style.display = startMenu.style.display==='flex'?'none':'flex';
});

// ===== Notificaciones =====
function showNotification(msg){
  const note=document.createElement('div');
  note.classList.add('notification');
  note.textContent=msg;
  document.body.appendChild(note);
  setTimeout(()=>note.remove(),2500);
}
</script>
</body>
</html>
