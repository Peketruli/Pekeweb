<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PekeOS Zonas</title>
<style>
body, html { margin:0; padding:0; width:100%; height:100%; background:#111; font-family:sans-serif; overflow:hidden; }

/* ===== Escritorio ===== */
#desktop { display:flex; flex-wrap:wrap; width:100%; height:100%; padding:10px; box-sizing:border-box; }

/* ===== Zonas ===== */
.zone {
  flex: 1 1 50%;
  border:2px dashed #00ffd0;
  margin:4px;
  position:relative;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  padding:10px;
  box-sizing:border-box;
  overflow:hidden;
}
.zone span { position:absolute; top:2px; left:2px; color:#00ffd0; font-size:14px; font-weight:bold; }

/* ===== Iconos ===== */
.icon { width:70px; text-align:center; cursor:pointer; position:absolute; }
.icon .thumb { width:64px; height:64px; background:#222; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:28px; }
.icon span { display:block; margin-top:6px; color:#00ffd0; font-size:12px; }

/* ===== Ventanas ===== */
.win { position:absolute; width:400px; height:300px; background:#111; border:2px solid #00ffd0; box-shadow:6px 6px 0 rgba(0,0,0,.8); display:flex; flex-direction:column; color:#fff; z-index:10; }
.titlebar { height:28px; background:linear-gradient(#222,#111); display:flex; align-items:center; padding:0 6px; gap:8px; user-select:none; border-bottom:1px solid #555; }
.titlebar .title { flex:1; font-size:13px; }
.controls { display:flex; gap:6px; }
.btn { width:20px; height:20px; border:2px solid #111; background:#222; color:#fff; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:0.2s; }
.btn:hover { background:#333; }
.content { flex:1; background:#000; overflow:hidden; display:flex; }
.content iframe { width:100%; height:100%; border:0; display:block; }
</style>
</head>
<body>

<div id="desktop">
  <div class="zone" id="zoneOcio"><span>Ocio</span></div>
  <div class="zone" id="zoneNoticias"><span>Noticias</span></div>
  <div class="zone" id="zoneRedes"><span>Redes Sociales</span></div>
  <div class="zone" id="zoneTrabajos"><span>Trabajos</span></div>
</div>

<!-- Ventana plantilla -->
<template id="winTpl">
  <div class="win">
    <div class="titlebar">
      <div class="title">Ventana</div>
      <div class="controls">
        <div class="btn" data-action="min">_</div>
        <div class="btn" data-action="max">â¬œ</div>
        <div class="btn" data-action="close">X</div>
      </div>
    </div>
    <div class="content"></div>
  </div>
</template>

<script>
// ===== Iconos por zona =====
const zonas = {
  zoneOcio: [
    {name:'Zona Arcade', icon:'ðŸ•¹ï¸', app:'golf.html'},
    {name:'Casino', icon:'ðŸŽ°', app:'c.html'}
  ],
  zoneNoticias: [
    {name:'Noticias', icon:'ðŸ“°', app:'noticias.html'}
  ],
  zoneRedes: [
    {name:'Twitter', icon:'ðŸ¦', app:'twitter.html'}
  ],
  zoneTrabajos: [
    {name:'Editor', icon:'âœï¸', app:'editor.html'}
  ]
};

// ===== Crear iconos dentro de las zonas =====
for(const zoneId in zonas){
  const zoneEl = document.getElementById(zoneId);
  zonas[zoneId].forEach((item,i)=>{
    const ic = document.createElement('div');
    ic.classList.add('icon');
    ic.innerHTML = `<div class="thumb">${item.icon}</div><span>${item.name}</span>`;
    // PosiciÃ³n aleatoria inicial dentro de la zona
    ic.style.left = Math.random()*(zoneEl.clientWidth-70)+'px';
    ic.style.top  = Math.random()*(zoneEl.clientHeight-90)+'px';
    zoneEl.appendChild(ic);

    // ===== Arrastrar iconos dentro de su zona =====
    let ox, oy, dx, dy, dragging=false;
    ic.addEventListener('mousedown', e=>{
      dragging=true;
      ox=e.clientX; oy=e.clientY;
      dx=parseInt(ic.style.left); dy=parseInt(ic.style.top);
      ic.style.zIndex=100;
      document.addEventListener('mousemove', move);
      document.addEventListener('mouseup', up);
    });
    function move(e){
      if(!dragging) return;
      let nx = dx + (e.clientX-ox);
      let ny = dy + (e.clientY-oy);
      // Limites dentro de la zona
      nx = Math.max(0, Math.min(nx, zoneEl.clientWidth-70));
      ny = Math.max(0, Math.min(ny, zoneEl.clientHeight-90));
      ic.style.left = nx+'px';
      ic.style.top  = ny+'px';
    }
    function up(){
      dragging=false;
      ic.style.zIndex=10;
      document.removeEventListener('mousemove',move);
      document.removeEventListener('mouseup',up);
    }

    // ===== Abrir ventana al doble click =====
    ic.addEventListener('dblclick', ()=>{
      createWindow(item.name, item.app);
    });
  });
}

// ===== Crear ventanas =====
const tpl = document.getElementById('winTpl');
function createWindow(title='Ventana', src=null){
  const node = tpl.content.firstElementChild.cloneNode(true);
  node.querySelector('.title').textContent = title;
  if(src){
    const iframe = document.createElement('iframe');
    iframe.src = src;
    node.querySelector('.content').appendChild(iframe);
  }
  document.body.appendChild(node);
  makeDraggable(node);
  attachControls(node);
  return node;
}

// ===== Drag ventana =====
function makeDraggable(el){
  const title = el.querySelector('.titlebar');
  let ox, oy, dx, dy, drag=false;
  title.addEventListener('mousedown', e=>{
    drag=true; ox=e.clientX; oy=e.clientY; dx=parseInt(el.style.left)||0; dy=parseInt(el.style.top)||0;
    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', up);
  });
  function move(e){ if(!drag) return; el.style.left=(dx+(e.clientX-ox))+'px'; el.style.top=(dy+(e.clientY-oy))+'px'; }
  function up(){ drag=false; document.removeEventListener('mousemove',move); document.removeEventListener('mouseup',up); }
}

// ===== Controles ventana =====
function attachControls(node){
  node.querySelectorAll('.btn').forEach(b=>{
    b.addEventListener('click', ()=>{
      const action=b.dataset.action;
      if(action==='close'){ node.remove(); }
      else if(action==='min'){ node.style.display='none'; node.classList.add('minimized'); }
      else if(action==='max'){
        if(node.dataset.maxed==='1'){ node.style.width='400px'; node.style.height='300px'; node.dataset.maxed='0'; }
        else{ node.style.width=(window.innerWidth-12)+'px'; node.style.height=(window.innerHeight-12)+'px'; node.dataset.maxed='1'; }
      }
    });
  });
}
</script>
</body>
</html>
