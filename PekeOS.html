<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PekeOS Ultra Impactante</title>
<style>
/* Reset */
* { margin:0; padding:0; box-sizing:border-box; font-family:sans-serif; }
body, html { width:100%; height:100%; overflow:hidden; background:black; }

/* ===== Pantalla de arranque ===== */
#bootScreen {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:#000; display:flex; justify-content:center; align-items:center;
  flex-direction:column; z-index:9999; overflow:hidden;
}

#bootScreen img {
  width:35%;
  max-width:400px;
  opacity:0;
  transform:scale(0.5);
  animation:logoEntrance 2s ease-in-out forwards;
  filter: drop-shadow(0 0 20px #00ffd0) drop-shadow(0 0 40px #00ffd0);
}

#bootText {
  position:absolute;
  bottom:100px;
  color:white;
  font-size:2rem;
  opacity:0;
  animation:textAppear 2s forwards 3s;
}

#progressBarContainer {
  position:absolute;
  bottom:50px;
  width:60%;
  max-width:500px;
  height:20px;
  background:#111;
  border:2px solid #00ffd0;
  border-radius:10px;
  overflow:hidden;
  opacity:0;
  animation:progressAppear 0.5s forwards 4s;
}

#progressBar {
  height:100%;
  width:0;
  background:#006666;
  box-shadow:0 0 10px #00ffd0;
  animation:progressFill 3s forwards 4.2s;
}

/* ===== Part√≠culas ===== */
.particle {
  position:absolute;
  width:6px; height:6px;
  border-radius:50%;
  background:#00ffd0;
  opacity:0.8;
  pointer-events:none;
  animation:particleFall linear infinite;
}

@keyframes logoEntrance {
  0% { opacity:0; transform:scale(0.5); filter: drop-shadow(0 0 0 #00ffd0);}
  40% { opacity:1; transform:scale(1.3); filter: drop-shadow(0 0 50px #00ffd0);}
  70% { transform:scale(0.95);}
  100% { transform:scale(1);}
}

@keyframes textAppear { to { opacity:1; } }
@keyframes progressAppear { to { opacity:1; } }
@keyframes progressFill { to { width:100%; } }
@keyframes particleFall {
  0% { transform: translateY(-20px) rotate(0deg);}
  100% { transform: translateY(120vh) rotate(360deg);}
}

/* ===== Escritorio ===== */
#desktop {
  display:none;
  width:100%; height:100%;
  background:#111;
  position:relative;
  padding:16px;
}

.icons { display:flex; flex-wrap:wrap; gap:14px; position:relative; z-index:2; }
.icon { width:70px; text-align:center; cursor:pointer; }
.icon .thumb { width:64px; height:64px; background:#222; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:28px; }
.icon span { display:block; margin-top:6px; color:#00ffd0; }

/* Taskbar */
.taskbar {
  position:fixed; bottom:0; left:0; right:0; height:42px;
  background:#222; border-top:3px solid #00ffd0; display:flex; align-items:center;
  padding:4px 6px; gap:8px; color:#fff; display:none;
  z-index:2;
}
.start-btn img { width:30px; height:30px; cursor:pointer; }

/* Ventanas */
.win { position:absolute; width:520px; background:#111; border:2px solid #00ffd0;
  box-shadow:6px 6px 0 rgba(0,0,0,.8); display:flex; flex-direction:column; color:#fff; z-index:3; }
.titlebar { height:28px; background:linear-gradient(#222,#111); color:#fff; display:flex; align-items:center;
  padding:0 6px; gap:8px; user-select:none; border-bottom:1px solid #555; }
.titlebar .title { flex:1; font-size:13px; }
.titlebar .controls { display:flex; gap:6px; }
.btn { width:20px; height:20px; border:2px solid #111; background:#222; color:#fff;
  display:flex; align-items:center; justify-content:center; cursor:pointer; transition: all 0.2s; }
.btn:hover { background:#333; }
.content { padding:0; background:#000; flex:1; overflow:hidden; display:flex; }
.content iframe { width:100%; height:100%; border:0; display:block; }

</style>
</head>
<body>

<!-- Pantalla de arranque -->
<div id="bootScreen">
  <img src="PekeOS.png" alt="PekeOS Logo">
  <div id="bootText">Iniciando PekeOS...</div>
  <div id="progressBarContainer">
    <div id="progressBar"></div>
  </div>
</div>

<!-- Escritorio -->
<div id="desktop">
  <div class="icons">
    <div class="icon" data-app="golf.html"><div class="thumb">üïπÔ∏è</div><span>Zona Arcade</span></div>
    <div class="icon" data-app="c.html"><div class="thumb">üé∞</div><span>Casino</span></div>
  </div>
</div>

<!-- Barra de tareas -->
<div class="taskbar">
  <div class="start-btn"><img src="PekeOSmini.png" alt="PekeOS"></div>
</div>

<!-- Ventana plantilla -->
<template id="winTpl">
  <div class="win">
    <div class="titlebar">
      <div class="title">Ventana</div>
      <div class="controls">
        <div class="btn" data-action="min">_</div>
        <div class="btn" data-action="max">‚¨ú</div>
        <div class="btn" data-action="close">X</div>
      </div>
    </div>
    <div class="content"></div>
  </div>
</template>

<script>
// ===== Generar part√≠culas =====
function spawnParticles(count=50){
  const boot = document.getElementById('bootScreen');
  for(let i=0;i<count;i++){
    const p = document.createElement('div');
    p.classList.add('particle');
    p.style.left=Math.random()*100+'vw';
    p.style.top=Math.random()*-100+'vh';
    p.style.width = p.style.height = (4+Math.random()*6)+'px';
    p.style.opacity = 0.3 + Math.random()*0.7;
    p.style.animationDuration = (2+Math.random()*3)+'s';
    boot.appendChild(p);
  }
}
spawnParticles(60);

// ===== Arranque completo con logo fijo =====
window.addEventListener('load', ()=>{
  const bootText = document.getElementById('bootText');
  const progress = document.getElementById('progressBarContainer');
  const desktop = document.getElementById('desktop');
  const taskbar = document.querySelector('.taskbar');

  setTimeout(()=>{
    bootText.style.transition='opacity 0.8s';
    progress.style.transition='opacity 0.8s';
    bootText.style.opacity=0;
    progress.style.opacity=0;

    setTimeout(()=>{
      document.getElementById('bootScreen').style.display='none';
      desktop.style.display='block';
      taskbar.style.display='flex';
    },800);
  },6500);
});

// ===== Crear ventanas =====
const tpl = document.getElementById('winTpl');
function createWindow(title='Ventana', src=null){
  const node = tpl.content.firstElementChild.cloneNode(true);
  node.querySelector('.title').textContent = title;
  if(src){
    const iframe = document.createElement('iframe');
    iframe.src = src;
    node.querySelector('.content').appendChild(iframe);
  }
  document.body.appendChild(node);
  makeDraggable(node);
  attachControls(node);
  return node;
}

// ===== Drag ventana =====
function makeDraggable(el){
  const title = el.querySelector('.titlebar');
  let ox, oy, dx, dy, drag=false;
  title.addEventListener('mousedown', (e)=>{
    drag=true; ox=e.clientX; oy=e.clientY; dx=parseInt(el.style.left)||0; dy=parseInt(el.style.top)||0;
    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', up);
  });
  function move(e){ if(!drag) return; el.style.left=(dx+(e.clientX-ox))+'px'; el.style.top=(dy+(e.clientY-oy))+'px'; }
  function up(){ drag=false; document.removeEventListener('mousemove',move); document.removeEventListener('mouseup',up); }
}

// ===== Controles ventana =====
function attachControls(node){
  node.querySelectorAll('.btn').forEach(b=>{
    b.addEventListener('click', ()=>{
      const action=b.dataset.action;
      if(action==='close'){ node.remove(); }
      else if(action==='min'){ node.style.display='none'; node.classList.add('minimized'); }
      else if(action==='max'){
        if(node.dataset.maxed==='1'){ node.style.width='520px'; node.style.height='360px'; node.dataset.maxed='0'; }
        else{ node.style.width=(window.innerWidth-12)+'px'; node.style.height=(window.innerHeight-72)+'px'; node.dataset.maxed='1'; }
      }
    });
  });
}

// ===== Drag de iconos del escritorio =====
const icons = document.querySelectorAll('#desktop .icon');
icons.forEach(icon => {
  icon.style.position = 'absolute';
  icon.style.left = icon.offsetLeft + 'px';
  icon.style.top = icon.offsetTop + 'px';

  let ox, oy, dx, dy, dragging=false;

  icon.addEventListener('mousedown', e => {
    dragging = true;
    ox = e.clientX;
    oy = e.clientY;
    dx = parseInt(icon.style.left);
    dy = parseInt(icon.style.top);
    icon.style.zIndex = 1000;

    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', up);
  });

  function move(e){
    if(!dragging) return;
    icon.style.left = dx + (e.clientX - ox) + 'px';
    icon.style.top  = dy + (e.clientY - oy) + 'px';
  }

  function up(){
    dragging = false;
    icon.style.zIndex = 2;
    document.removeEventListener('mousemove', move);
    document.removeEventListener('mouseup', up);
  }
});

// ===== Abrir apps al doble click =====
document.querySelectorAll('#desktop .icon').forEach(icon => {
  icon.addEventListener('dblclick', () => {
    const title = icon.querySelector('span').textContent;
    const app = icon.dataset.app;

    // Solo abrir si tiene app definida
    if(app) createWindow(title, app);
  });
});

</script>
</body>
</html>
