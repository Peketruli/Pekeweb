<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Monopoly Cl치sico</title>
<style>
  body {
    margin: 0;
    background: #2c2c2c;
    color: white;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  canvas {
    background: #fafafa;
    border: 5px solid #000;
    margin-top: 10px;
  }
  #hud {
    display: flex;
    justify-content: space-between;
    width: 700px;
    margin-top: 10px;
    font-size: 18px;
  }
  #hand {
    margin-top: 10px;
    width: 700px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    min-height: 100px;
    background: rgba(0,0,0,0.3);
    padding: 8px;
    border-radius: 8px;
  }
  .card {
    background: #fff;
    color: #000;
    padding: 6px;
    border-radius: 6px;
    width: 110px;
    height: 80px;
    font-size: 12px;
    box-shadow: 0 0 5px #000;
    position: relative;
    cursor: pointer;
  }
  .tooltip {
    position: absolute;
    bottom: 90px;
    left: 0;
    background: #333;
    color: white;
    padding: 5px;
    border-radius: 6px;
    font-size: 11px;
    display: none;
    width: 180px;
  }
  .card:hover .tooltip {
    display: block;
  }
  #message {
    margin-top: 10px;
    background: rgba(255,255,255,0.1);
    padding: 6px 12px;
    border-radius: 6px;
    min-height: 24px;
  }
  #draw-card {
    position: absolute;
    top: 300px;
    left: 300px;
    width: 100px;
    height: 150px;
    background: orange;
    display: flex;
    align-items: center;
    justify-content: center;
    color: black;
    font-weight: bold;
    border-radius: 10px;
    transition: transform 0.4s ease-out, opacity 0.4s ease-out;
    opacity: 0;
    pointer-events: none;
  }
</style>
</head>
<body>
<h2>游 Monopoly Cl치sico</h2>
<div id="hud">
  <div id="money">游눯 Dinero: 1500</div>
  <button id="roll">Tirar Dados</button>
  <div id="turn">Turno: Jugador</div>
</div>
<canvas id="board" width="700" height="700"></canvas>
<div id="hand"></div>
<div id="message"></div>
<div id="draw-card">Carta</div>
<script>
const canvas = document.getElementById("board");
const ctx = canvas.getContext("2d");
const rollBtn = document.getElementById("roll");
const messageEl = document.getElementById("message");
const drawCardEl = document.getElementById("draw-card");
const handEl = document.getElementById("hand");
let turn = "player";
let playerMoney = 1500;
let playerPos = 0;
let properties = [];
let playerHand = [];

const propertyData = [
  {name:"Salida", type:"corner"},
  {name:"Mediterr치neo", price:60, color:"brown"},
  {name:"Arca Comunal", type:"arca"},
  {name:"Baltic Avenue", price:60, color:"brown"},
  {name:"Impuesto", type:"tax"},
  {name:"Estaci칩n Reading", price:200, type:"station"},
  {name:"Oriental Avenue", price:100, color:"lightblue"},
  {name:"Suerte", type:"suerte"},
  {name:"Vermont Avenue", price:100, color:"lightblue"},
  {name:"Connecticut Avenue", price:120, color:"lightblue"},
  {name:"C치rcel", type:"corner"},
  {name:"St. Charles Place", price:140, color:"pink"},
  {name:"Compa침칤a El칠ctrica", price:150, type:"company"},
  {name:"States Avenue", price:140, color:"pink"},
  {name:"Virginia Avenue", price:160, color:"pink"},
  {name:"Estaci칩n Pennsylvania", price:200, type:"station"},
  {name:"St. James Place", price:180, color:"orange"},
  {name:"Arca Comunal", type:"arca"},
  {name:"Tennessee Avenue", price:180, color:"orange"},
  {name:"New York Avenue", price:200, color:"orange"},
  {name:"Parking", type:"corner"},
  {name:"Kentucky Avenue", price:220, color:"red"},
  {name:"Suerte", type:"suerte"},
  {name:"Indiana Avenue", price:220, color:"red"},
  {name:"Illinois Avenue", price:240, color:"red"},
  {name:"Estaci칩n B&O", price:200, type:"station"},
  {name:"Atlantic Avenue", price:260, color:"yellow"},
  {name:"Ventnor Avenue", price:260, color:"yellow"},
  {name:"Compa침칤a Agua", price:150, type:"company"},
  {name:"Marvin Gardens", price:280, color:"yellow"},
  {name:"Ve a la C치rcel", type:"corner"},
  {name:"Pacific Avenue", price:300, color:"green"},
  {name:"North Carolina Avenue", price:300, color:"green"},
  {name:"Arca Comunal", type:"arca"},
  {name:"Pennsylvania Avenue", price:320, color:"green"},
  {name:"Estaci칩n Short Line", price:200, type:"station"},
  {name:"Suerte", type:"suerte"},
  {name:"Park Place", price:350, color:"darkblue"},
  {name:"Impuesto Lujo", type:"tax"},
  {name:"Boardwalk", price:400, color:"darkblue"}
];

function drawBoard(){
  ctx.clearRect(0,0,700,700);
  const size = 700;
  const cell = 60;
  const corner = 100;
  ctx.strokeStyle="#000";
  ctx.lineWidth=2;
  // Borde exterior
  ctx.strokeRect(0,0,size,size);

  // Dibuja 10 casillas por lado
  for(let i=0;i<11;i++){
    // inferior
    if(i<10) ctx.strokeRect(size-corner-(i*cell),size-corner,cell,corner);
    // izquierda
    if(i<10) ctx.strokeRect(0,size-corner-(i*cell),corner,cell);
    // superior
    if(i<10) ctx.strokeRect(corner+(i*cell),0,cell,corner);
    // derecha
    if(i<10) ctx.strokeRect(size-corner,corner+(i*cell),corner,cell);
  }

  // esquinas
  ctx.strokeRect(0,0,corner,corner);
  ctx.strokeRect(size-corner,0,corner,corner);
  ctx.strokeRect(0,size-corner,corner,corner);
  ctx.strokeRect(size-corner,size-corner,corner,corner);

  // nombres simples
  ctx.font="10px sans-serif";
  ctx.fillStyle="#000";
  const labels = ["Salida","C치rcel","Parking","Ve a la C치rcel"];
  ctx.fillText("Salida",size-80,size-10);
  ctx.fillText("C치rcel",10,size-10);
  ctx.fillText("Parking",10,20);
  ctx.fillText("Ve a la C치rcel",size-90,20);
}

function showMessage(txt){
  messageEl.textContent = txt;
}

function animateCard(text){
  drawCardEl.textContent = text;
  drawCardEl.style.opacity = "1";
  drawCardEl.style.transform = "translateY(-30px)";
  setTimeout(()=>{drawCardEl.style.opacity="0";drawCardEl.style.transform="";},2000);
}

function addToHand(card){
  const div = document.createElement("div");
  div.className="card";
  div.innerHTML = `<b>${card.name}</b>${card.price?`<br>$${card.price}`:""}`;
  if(card.color) div.style.borderTop=`15px solid ${card.color}`;
  const tip=document.createElement("div");
  tip.className="tooltip";
  if(card.type==="property"){
    tip.innerHTML = `
      <b>${card.name}</b><br>
      Precio: $${card.price}<br>
      Casa: $${card.houseCost}<br>
      Hotel: $${card.hotelCost}<br>
      Rentas: ${card.rent.join(", ")}
    `;
  } else if(card.type==="card"){
    tip.innerHTML=`<b>${card.name}</b><br>${card.desc}`;
  }
  div.appendChild(tip);
  handEl.appendChild(div);
}

function drawCard(kind){
  const cards = kind==="suerte"?[
    {name:"Avanza a Salida",action:()=>{playerPos=0;showMessage("Vas a Salida y cobras $200");playerMoney+=200;updateHUD();}},
    {name:"Ve a la C치rcel",action:()=>{playerPos=10;showMessage("Vas a la C치rcel!");}},
    {name:"Cobras $50",action:()=>{playerMoney+=50;showMessage("Ganas $50");updateHUD();}},
    {name:"Salir de la C치rcel",action:()=>{playerHand.push({name:"Salir de la C치rcel",type:"card",desc:"칔sala para salir de la c치rcel"});addToHand(playerHand[playerHand.length-1]);showMessage("Has ganado una carta para salir de la c치rcel!");}}
  ]:[
    {name:"Pagas $100",action:()=>{playerMoney-=100;showMessage("Pagas $100");updateHUD();}},
    {name:"Cobras $200",action:()=>{playerMoney+=200;showMessage("Cobras $200");updateHUD();}},
    {name:"Salir de la C치rcel",action:()=>{playerHand.push({name:"Salir de la C치rcel",type:"card",desc:"칔sala para salir de la c치rcel"});addToHand(playerHand[playerHand.length-1]);showMessage("Has ganado una carta para salir de la c치rcel!");}}
  ];
  const card = cards[Math.floor(Math.random()*cards.length)];
  animateCard(card.name);
  setTimeout(()=>card.action(),2000);
}

function updateHUD(){
  document.getElementById("money").textContent=`游눯 Dinero: ${playerMoney}`;
}

rollBtn.onclick=()=>{
  const dice = Math.floor(Math.random()*6)+1 + Math.floor(Math.random()*6)+1;
  playerPos = (playerPos + dice)%40;
  const tile = propertyData[playerPos];
  showMessage(`Avanzas ${dice} casillas y caes en ${tile.name}`);
  if(tile.type==="suerte") drawCard("suerte");
  if(tile.type==="arca") drawCard("arca");
  if(tile.price && !tile.owner){
    if(confirm(`쮺omprar ${tile.name} por $${tile.price}?`)){
      if(playerMoney>=tile.price){
        playerMoney -= tile.price;
        updateHUD();
        tile.owner="player";
        const propCard={
          name:tile.name,
          price:tile.price,
          rent:[tile.price*0.1,tile.price*0.3,tile.price*0.9,tile.price*1.5,tile.price*2],
          houseCost:tile.price*0.5,
          hotelCost:tile.price,
          type:"property",
          color:tile.color
        };
        playerHand.push(propCard);
        addToHand(propCard);
        showMessage(`Compraste ${tile.name}`);
      } else showMessage("No tienes suficiente dinero");
    }
  }
  drawBoard();
};

drawBoard();
updateHUD();
showMessage("Tu turno. 춰Tira los dados!");
</script>
</body>
</html>
