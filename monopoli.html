<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Monopoly Cl치sico</title>
<style>
  body {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    background: #c9d6df;
    font-family: Arial, sans-serif;
  }
  #container {
    display: flex;
    margin-top: 20px;
  }
  canvas {
    background: #f9f9f9;
    border: 4px solid #333;
  }
  #hud {
    margin-left: 20px;
    background: #ffffffcc;
    border: 2px solid #333;
    padding: 10px;
    border-radius: 10px;
    min-width: 250px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }
  h2 {
    text-align: center;
    margin-bottom: 10px;
  }
  #info {
    margin-top: 10px;
    font-weight: bold;
  }
  button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    border: none;
    background: #0077ff;
    color: white;
  }
  button:disabled {
    background: #aaa;
  }
</style>
</head>
<body>
<div id="container">
  <canvas id="gameCanvas" width="800" height="800"></canvas>
  <div id="hud">
    <h2>Turno</h2>
    <div id="turnInfo">Jugador</div>
    <h2>Dinero</h2>
    <div id="moneyInfo"></div>
    <h2>Propiedades</h2>
    <div id="propInfo"></div>
    <button id="rollDiceBtn">游 Tirar dado</button>
    <div id="info"></div>
  </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const boardSize = 800;
const numCellsPerSide = 10;
const cellSize = boardSize / numCellsPerSide;

// === TABLERO CL츼SICO MONOPOLY ===
const board = [
  {name:"Salida", type:"especial"},
  {name:"Ronda de Valencia", color:"#8B4513", price:60, type:"propiedad"},
  {name:"Comunidad", type:"arca"},
  {name:"Plaza Lavapi칠s", color:"#8B4513", price:60, type:"propiedad"},
  {name:"Impuesto sobre el capital", type:"impuesto"},
  {name:"Estaci칩n de Mediod칤a", color:"#000", price:200, type:"estacion"},
  {name:"Glorieta Cuatro Caminos", color:"#ADD8E6", price:100, type:"propiedad"},
  {name:"Suerte", type:"suerte"},
  {name:"Avenida Reina Victoria", color:"#ADD8E6", price:100, type:"propiedad"},
  {name:"Calle Bravo Murillo", color:"#ADD8E6", price:120, type:"propiedad"},
  {name:"C치rcel", type:"especial"},
  {name:"Glorieta Bilbao", color:"#FFC0CB", price:140, type:"propiedad"},
  {name:"Compa침칤a de electricidad", type:"compa침ia", price:150},
  {name:"Calle Alberto Aguilera", color:"#FFC0CB", price:140, type:"propiedad"},
  {name:"Calle Fuencarral", color:"#FFC0CB", price:160, type:"propiedad"},
  {name:"Estaci칩n del Norte", color:"#000", price:200, type:"estacion"},
  {name:"Avenida Felipe II", color:"#FFA500", price:180, type:"propiedad"},
  {name:"Comunidad", type:"arca"},
  {name:"Calle Serrano", color:"#FFA500", price:180, type:"propiedad"},
  {name:"Calle Vel치zquez", color:"#FFA500", price:200, type:"propiedad"},
  {name:"Parking", type:"especial"},
  {name:"Avenida de Am칠rica", color:"#FF0000", price:220, type:"propiedad"},
  {name:"Suerte", type:"suerte"},
  {name:"Calle Mar칤a de Molina", color:"#FF0000", price:220, type:"propiedad"},
  {name:"Calle Cea Berm칰dez", color:"#FF0000", price:240, type:"propiedad"},
  {name:"Estaci칩n de Delicias", color:"#000", price:200, type:"estacion"},
  {name:"Avenida de los Poblados", color:"#FFFF00", price:260, type:"propiedad"},
  {name:"Calle O'Donnell", color:"#FFFF00", price:260, type:"propiedad"},
  {name:"Compa침칤a de agua", type:"compa침ia", price:150},
  {name:"Calle Goya", color:"#FFFF00", price:280, type:"propiedad"},
  {name:"Ve a la c치rcel", type:"especial"},
  {name:"Calle Alcal치", color:"#008000", price:300, type:"propiedad"},
  {name:"Calle Gran V칤a", color:"#008000", price:300, type:"propiedad"},
  {name:"Comunidad", type:"arca"},
  {name:"Paseo de la Castellana", color:"#008000", price:320, type:"propiedad"},
  {name:"Estaci칩n del Sur", color:"#000", price:200, type:"estacion"},
  {name:"Suerte", type:"suerte"},
  {name:"Paseo del Prado", color:"#0000FF", price:350, type:"propiedad"},
  {name:"Impuesto de lujo", type:"impuesto"},
  {name:"Calle Serrano Mayor", color:"#0000FF", price:400, type:"propiedad"}
];

// === Jugadores ===
const players = [
  {name:"Jugador", color:"blue", pos:0, money:1500, properties:[]},
  {name:"IA", color:"red", pos:0, money:1500, properties:[]}
];
let currentPlayer = 0;
let animating = false;

// === FUNCIONES ===

// Obtener coordenadas
function getCoordinates(pos){
  if(pos<10) return {x:boardSize - cellSize*(pos+1), y:boardSize-cellSize};
  if(pos<20) return {x:0, y:boardSize - cellSize*(pos-9)};
  if(pos<30) return {x:cellSize*(pos-20), y:0};
  return {x:boardSize-cellSize, y:cellSize*(pos-30)};
}

// Dibujar tablero
function drawBoard(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<numCellsPerSide;i++){
    ctx.strokeRect(i*cellSize, 0, cellSize, cellSize);
    ctx.strokeRect(i*cellSize, boardSize-cellSize, cellSize, cellSize);
    ctx.strokeRect(0, i*cellSize, cellSize, cellSize);
    ctx.strokeRect(boardSize-cellSize, i*cellSize, cellSize, cellSize);
  }

  // Colores de propiedad
  for(let i=0;i<40;i++){
    const cell = board[i];
    if(cell.color){
      const {x,y} = getCoordinates(i);
      ctx.fillStyle = cell.color;
      ctx.fillRect(x, y, cellSize, 10);
    }
  }

  // Fichas
  players.forEach(p => {
    const {x,y} = getCoordinates(p.pos);
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.arc(x+cellSize/2, y+cellSize/2, 15, 0, Math.PI*2);
    ctx.fill();
  });
}

// Actualizar HUD
function updateHUD(msg=""){
  document.getElementById('turnInfo').textContent = players[currentPlayer].name;
  document.getElementById('moneyInfo').innerHTML = players.map(p=>`${p.name}: $${p.money}`).join("<br>");
  document.getElementById('propInfo').innerHTML = players.map(p=>`${p.name}: ${p.properties.length} propiedades`).join("<br>");
  document.getElementById('info').textContent = msg;
}

// Turnos
function nextTurn(){
  currentPlayer = (currentPlayer+1) % players.length;
  updateHUD("Turno de "+players[currentPlayer].name);
  if(players[currentPlayer].name==="IA"){
    setTimeout(()=>rollDice(), 1500);
  }
}

// Movimiento animado
function animateMove(player, steps){
  if(animating) return;
  animating = true;
  let step = 0;
  
  function moveStep(){
    if(step<steps){
      player.pos++;
      if(player.pos>=40){
        player.pos-=40;
        player.money+=200;
        updateHUD(player.name+" pasa por salida (+$200)");
      }
      step++;
      drawBoard();
      setTimeout(moveStep, 200);
    } else {
      animating=false;
      handleCell(player);
      nextTurn();
    }
  }
  moveStep();
}

// L칩gica de casilla
function handleCell(player){
  const cell = board[player.pos];
  if(cell.type==="propiedad" || cell.type==="estacion" || cell.type==="compa침ia"){
    if(cell.owner===null){
      if(player.name==="Jugador" && player.money>=cell.price){
        const buy = confirm(`쮺omprar ${cell.name} por $${cell.price}?`);
        if(buy){
          player.money-=cell.price;
          cell.owner=player.name;
          player.properties.push(cell);
          updateHUD(player.name+" compra "+cell.name);
        }
      } else if(player.name==="IA" && player.money>=cell.price){
        cell.owner=player.name;
        player.money-=cell.price;
        player.properties.push(cell);
        updateHUD("IA compra "+cell.name);
      }
    } else if(cell.owner!==player.name){
      const owner = players.find(p=>p.name===cell.owner);
      const rent = Math.floor(cell.price/2);
      player.money-=rent;
      owner.money+=rent;
      updateHUD(player.name+" paga $"+rent+" a "+owner.name);
    } else {
      updateHUD(player.name+" cae en su propia propiedad");
    }
  } else if(cell.type==="impuesto"){
    player.money -= 100;
    updateHUD(player.name+" paga $100 de impuestos");
  } else if(cell.name==="Ve a la c치rcel"){
    player.pos = 10;
    updateHUD(player.name+" va a la c치rcel 游뚭");
  } else if(cell.type==="suerte" || cell.type==="arca"){
    updateHUD(cell.type==="suerte" ? "Carta de Suerte (a칰n sin implementar)" : "Carta de Comunidad (a칰n sin implementar)");
  } else {
    updateHUD(cell.name);
  }
  drawBoard();
}

// Tirar dado
document.getElementById('rollDiceBtn').addEventListener('click', ()=>{
  if(animating) return;
  rollDice();
});

function rollDice(){
  const player = players[currentPlayer];
  const dice = Math.floor(Math.random()*6)+1;
  updateHUD(player.name+" tir칩 un "+dice);
  animateMove(player, dice);
}

drawBoard();
updateHUD("Juego cl치sico iniciado");
</script>
</body>
</html>
