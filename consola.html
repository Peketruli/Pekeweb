<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Consola de Actividad</title>
<style>
  body { background:#000; color:#0f0; font-family:"Courier New",monospace; padding:20px; white-space:pre-wrap; overflow-y:auto; }
  h1 { color:#0f0; text-shadow:0 0 10px #0f0; }
  .error { color:red; text-align:center; font-size:24px; margin-top:100px; }
  #log { display:none; margin-top:20px; }
  #status { display:none; margin-bottom:10px; }
  #clearBtn { margin-top:10px; padding:6px 12px; background:#111; color:#0f0; border:1px solid #0f0; cursor:pointer; border-radius:6px; }
  #clearBtn:hover { background:#0f0; color:#000; }
</style>
</head>
<body>
<h1>Consola de Actividad</h1>
<div id="status"></div>
<button id="clearBtn">üßπ Limpiar todos los registros</button>
<pre id="log"></pre>

<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script>
const supabase = window.supabase.createClient(
  "https://jdvwlfogkzrzovepzjqa.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkdndsZm9na3pyem92ZXB6anFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMzY1MjEsImV4cCI6MjA3MzYxMjUyMX0.IwVFrvuluY0tfgE82XnqYSsRjFPsDYnlfyirHjKu1TI"
);

// üîπ Funci√≥n global para registrar actividad
async function registrarActividad(accion) {
  let user = localStorage.getItem("currentUser");
  try { user = JSON.parse(user); } catch {}
  if (typeof user === "object" && user?.username) user = user.username;
  if (!user) user = "Invitado";

  const { error } = await supabase.from("actividad").insert([
    { usuario: user, accion, fecha: new Date().toISOString() }
  ]);

  if (error) console.error("‚ùå Error al registrar actividad:", error.message);
}

// Ejemplo de uso:
registrarActividad("ha iniciado sesi√≥n");
</script>

</body>
</html>
